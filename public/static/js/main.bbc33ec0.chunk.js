(this["webpackJsonprentit-front"]=this["webpackJsonprentit-front"]||[]).push([[0],{406:function(e,t,n){},407:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),s=n.n(c),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,442)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},i=n(37),l=n(47),d=n(94),j=n(19),u=n(26),b=n.n(u),p=n(33);var h=function(e,t){var n=localStorage.getItem(t),r=n?JSON.parse(n):e,c=Object(a.useState)(r),s=Object(j.a)(c,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){localStorage.setItem(t,JSON.stringify(o))}),[o,t]),[o,i]},x=n(76),O=n.n(x),g=O.a.create({baseURL:"https://rentit-project.herokuapp.com/api/auth",withCredentials:!0}),m=function(e){return g.post("/signup",e)},f=function(e){return g.post("/login",e)},y=function(e){return g.get("/logout")},v=function(e){return g.get("/session")},w=function(e){return g.patch("/verify",e)},k=n(254),C=n(2),S=Object(a.createContext)(),N=function(e){var t=h(null,"user"),n=Object(j.a)(t,2),r=n[0],c=n[1];function s(){return(s=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:n=e.sent,a=n.data,c(a),k.a.success({message:"Hello ".concat(a.firstName,"!"),description:"Thank you for logging in \ud83d\ude4c",duration:5,style:{borderRadius:"20px"}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function o(){return(o=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t("/"),e.next=4,y();case 4:c(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,(n=t.data)&&c(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(C.jsx)(S.Provider,{value:{user:r,login:function(e){return s.apply(this,arguments)},logout:function(e){return o.apply(this,arguments)},setUser:c},children:e.children})},I=function(){return Object(a.useContext)(S)},T=n(429),L=n(426),P=n(125),F=n(74),R=n(46),D=n(430),z=n(103),M=n(244),A=n(432),E=n(48),Y=n(100),G=n(438),J=n(256),H=n(439),_=T.a.Search,q=function(e){var t,n=e.push,r=I(),c=r.user,s=r.logout,o=Object(a.useState)(!1),l=Object(j.a)(o,2),u=l[0],b=l[1],p=Object(a.useState)(!1),h=Object(j.a)(p,2),x=h[0],O=h[1],g=L.a.confirm,m=function(){b(!1)},f=function(e){O(e)};return Object(C.jsxs)(P.a,{justify:"space-between",align:"middle",children:[Object(C.jsxs)(F.a,{span:4,children:[Object(C.jsx)(R.a,{type:"text",onClick:function(){b(!0)},size:"large",children:Object(C.jsx)(G.a,{})}),Object(C.jsx)(D.a,{placement:"left",closable:!0,onClose:m,visible:u,closeIcon:Object(C.jsx)(J.a,{rotate:45}),children:Object(C.jsxs)(z.a,{theme:"light",children:[Object(C.jsx)(z.a.Item,{onClick:m,children:Object(C.jsx)(i.b,{to:"/products",children:"Products"})},"1"),Object(C.jsx)(z.a.Item,{onClick:m,children:"nav 2"},"2"),Object(C.jsx)(z.a.Item,{onClick:m,children:"nav 3"},"3")]})})]}),Object(C.jsx)(F.a,{span:4,align:"middle",children:Object(C.jsx)(i.b,{to:"/",children:Object(C.jsx)("img",{alt:"RENTIT",src:"https://res.cloudinary.com/djv6xyyqp/image/upload/v1614452197/rentit/images/rentit-logoRecurso_8_1x_dc0e8o.png",style:{maxHeight:"44px"}})})}),Object(C.jsxs)(F.a,{span:4,align:"right",style:{display:"flex"},children:[Object(C.jsx)(_,{placeholder:"input search text",allowClear:!0,onSearch:function(e){return console.log(e)},style:{width:"calc(100% - 32px)",paddingRight:"10px"}}),c?Object(C.jsx)(M.a,{placement:"bottomRight",title:Object(C.jsx)("span",{children:"".concat(c.firstName,"  ").concat(c.lastName)}),content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(R.a,{type:"text",onClick:function(){return f(!1)},children:Object(C.jsx)(i.b,{to:"/profile",children:"Profile"})}),Object(C.jsx)("br",{}),Object(C.jsx)(R.a,{type:"text",onClick:function(){f(!1),g({icon:Object(C.jsx)(Y.a,{}),content:Object(C.jsx)("h3",{children:"Are you sure you want to log out?"}),maskClosable:!0,onOk:function(){s(n)}})},children:"Log out"})]}),trigger:"click",visible:x,onVisibleChange:f,children:c.avatar?Object(C.jsx)(A.a,{src:c.avatar,style:{cursor:"pointer"}}):Object(C.jsx)(A.a,{style:(t={background:"rgb(0,161,186)"},Object(d.a)(t,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(d.a)(t,"cursor","pointer"),t),children:"".concat(c.firstName[0]).concat(c.lastName[0])})}):Object(C.jsx)(E.a,{placement:"bottom",title:"Login/Signup",children:Object(C.jsx)(i.b,{to:"/login",style:{display:"flex",alignItems:"center"},children:Object(C.jsx)(H.a,{style:{fontSize:"1.6em",color:"rgba(0, 0, 0, 0.85)"}})})})]})]})},B=n(414),U=B.a.Header,$=B.a.Content,V=B.a.Footer,Z=function(e){var t,n=e.children,a=Object(l.g)().push;return"/"===Object(l.h)().pathname&&(t={position:"absolute"}),Object(C.jsxs)(B.a,{className:"layout",children:[Object(C.jsx)(U,{style:t,children:Object(C.jsx)(q,{push:a})}),Object(C.jsx)($,{children:Object(C.jsx)("div",{className:"site-layout-content",children:n})}),Object(C.jsxs)(V,{style:{textAlign:"center"},children:["RENTIT \xa92020 Created by ",Object(C.jsxs)("a",{href:"https://github.com/JuanBatkis",target:"_blank",children:["Juan Batkis ",Object(C.jsx)("span",{style:{fontSize:"1.2em"},children:"\ud83d\udc4b"})]})]})]})},Q=n(67),W=n(179),K=function(e){var t=e.component,n=Object(W.a)(e,["component"]),a=I().user;return Object(C.jsx)(l.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return a?Object(C.jsx)(t,Object(Q.a)({},e)):(k.a.error({message:"Something went wrong",description:"You must be logged in to access this section",duration:5,style:{borderRadius:"20px"}}),Object(C.jsx)(l.a,{to:"/login"}))}}))},X=function(e){var t=e.component,n=Object(W.a)(e,["component"]),a=I().user;return Object(C.jsx)(l.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return a?Object(C.jsx)(l.a,{to:"/profile"}):Object(C.jsx)(t,Object(Q.a)({},e))}}))},ee=O.a.create({baseURL:"https://rentit-project.herokuapp.com/api/product",withCredentials:!0}),te=function(e){return ee.get("/all/".concat(e))},ne=function(e){return ee.post("/query",e)},ae=function(e){return ee.get("/".concat(e))},re=function(e,t){return ee.get("/user/".concat(e,"/").concat(t))},ce=function(e){return ee.delete("/".concat(e))},se=n(434),oe=n(425),ie=se.a.Meta,le=function(e){var t=e.product,n="".concat(t._id,"-").concat(t.name.replace(/\s+/g,"-").toLowerCase());return Object(C.jsx)(F.a,{span:6,children:Object(C.jsx)(i.b,{to:"/product/".concat(n),children:Object(C.jsx)(se.a,{hoverable:!0,cover:t.images[0]?Object(C.jsx)("img",{alt:"product image",src:t.images[0],style:{height:"320px",objectFit:"contain",padding:"1px"}}):Object(C.jsx)(oe.a.Image,{style:{height:"320px",width:"100%"}}),children:Object(C.jsx)(ie,{title:t.name,description:t.priceDay?"$".concat(t.priceHour,"/hr or $").concat(t.priceDay,"/day"):"$".concat(t.priceHour,"/hr")})})})})},de=n(423),je=de.a.Title,ue=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(),s=Object(a.useRef)();Object(a.useRef)();Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(4);case 3:t=e.sent,n=t.data,r(n.products),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("section",{id:"main-banner",children:Object(C.jsxs)(P.a,{className:"full-heigh",justify:"center",align:"middle",children:[Object(C.jsx)(F.a,{span:7,offset:2,children:Object(C.jsx)(je,{children:"A new way to get what you need"})}),Object(C.jsxs)(F.a,{span:15,className:"full-heigh iframe-container",children:[Object(C.jsx)("div",{id:"iframeCover",ref:s,style:{opacity:"1"}}),Object(C.jsx)("iframe",{src:"https://my.spline.design/floating-adbb8c927f6e8e69a180701a9fb2ad6c/",frameBorder:"0",width:"100%",height:"100%",onLoad:function(){c.current.style.opacity="1",s.current.style.opacity="0"},ref:c})]})]})}),Object(C.jsx)(P.a,{gutter:16,style:{padding:"20px"},id:"latest-prods",children:n?n.map((function(e){return Object(C.jsx)(le,{product:e})})):Object(C.jsx)(oe.a,{active:!0})})]})},be=n(421),pe=n(415),he=n(50),xe=n(440),Oe=n(441),ge=de.a.Text,me=function(){var e=be.a.useForm(),t=Object(j.a)(e,1)[0],n=I().login;return Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsxs)("div",{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Login"}),Object(C.jsxs)(be.a,{form:t,onFinish:function(e){n(e)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{name:"email",label:"Email:",children:Object(C.jsx)(T.a,{type:"email"})}),Object(C.jsx)(be.a.Item,{name:"password",label:"Password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Log me in!"})]}),Object(C.jsx)(pe.a,{id:"socialDivider",children:"Or connect with"}),Object(C.jsxs)(P.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/google",children:Object(C.jsx)(xe.a,{})})}),Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/facebook",children:Object(C.jsx)(Oe.a,{})})}),Object(C.jsx)(F.a,{span:24,align:"middle",className:"changeAuth",children:Object(C.jsxs)(ge,{children:["Don't have an account? ",Object(C.jsx)(i.b,{to:"/signup",children:"Sign up here!"})]})})]})]})})})},fe=de.a.Text,ye=function(){var e=be.a.useForm(),t=Object(j.a)(e,1)[0],n=Object(l.g)().push;function a(){return(a=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(t);case 3:k.a.success({message:"Account created!",description:"Hello ".concat(t.firstName," \ud83d\udc4b. Please check your email to verify your account"),duration:5,style:{borderRadius:"20px"}}),n("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsxs)("div",{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Sign up"}),Object(C.jsxs)(be.a,{form:t,onFinish:function(e){return a.apply(this,arguments)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{name:"email",label:"Email:",children:Object(C.jsx)(T.a,{type:"email"})}),Object(C.jsxs)(P.a,{gutter:6,children:[Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{name:"firstName",label:"First name:",children:Object(C.jsx)(T.a,{})})}),Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{name:"lastName",label:"Last name:",children:Object(C.jsx)(T.a,{})})})]}),Object(C.jsx)(be.a.Item,{name:"storeName",label:"Store name:",children:Object(C.jsx)(T.a,{})}),Object(C.jsx)(be.a.Item,{name:"phone",label:"Phone:",children:Object(C.jsx)(T.a,{})}),Object(C.jsx)(be.a.Item,{name:"password",label:"Password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(be.a.Item,{name:"confirmPassword",label:"Confirm password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Sign me up!"})]}),Object(C.jsx)(pe.a,{id:"socialDivider",children:"Or connect with"}),Object(C.jsxs)(P.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/google",children:Object(C.jsx)(xe.a,{})})}),Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/facebook",children:Object(C.jsx)(Oe.a,{})})}),Object(C.jsx)(F.a,{span:24,align:"middle",className:"changeAuth",children:Object(C.jsxs)(fe,{children:["Already have an account? ",Object(C.jsx)(i.b,{to:"/login",children:"Log in here!"})]})})]})]})})})},ve=n(173),we=n(70),ke=de.a.Paragraph,Ce=Object(C.jsx)(we.a,{style:{fontSize:40,color:"#5dbe8c"},spin:!0}),Se=function(){var e=Object(l.i)().id,t=Object(a.useState)(!0),n=Object(j.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),o=Object(j.a)(s,2),d=o[0],u=o[1],h=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({id:t});case 3:n=e.sent,a=n.data,u(a.firstName),c(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(e)}),[]),Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsx)("div",{children:r?Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(ve.a,{indicator:Ce})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:["Hello ",d,"!"]}),Object(C.jsx)(ke,{children:"Your account has been successfully activated!"}),Object(C.jsx)(ke,{children:"You can now proceed to login and start taking advantage of every feature of our platform!"}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(R.a,{type:"primary",size:"large",shape:"round",style:{height:"auto",padding:"6px 30px"},children:Object(C.jsx)(i.b,{to:"/login",style:{color:"#fff",fontSize:"1.5em"},children:"Log in!"})})})]})})})})},Ne=n(44),Ie=n.n(Ne),Te=(n(194),n(174)),Le=n.n(Te),Pe=(n(234),n(435)),Fe=n(436),Re=n(122),De=n(427),ze=de.a.Text,Me=function(e){var t=e.rating,n=t.one+t.two+t.three+t.four+t.five;return Object(C.jsxs)("div",{children:[Object(C.jsx)(De.a,{allowHalf:!0,disabled:!0,defaultValue:t.total}),Object(C.jsx)(ze,{children:" (".concat(n,1===n?" rating)":" ratings)")})]})};Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var Ae=de.a.Title,Ee=de.a.Text,Ye=function(){var e=I().user,t=I().setUser,n=Object(a.useState)(e.firstName),r=Object(j.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(e.lastName),i=Object(j.a)(o,2),l=i[0],d=i[1],u=Object(a.useState)(e.storeName),h=Object(j.a)(u,2),x=h[0],O=h[1],m=Object(a.useState)(e.phone),f=Object(j.a)(m,2),y=f[0],w=f[1],k=Object(a.useRef)(),S=Object(a.useState)(!1),N=Object(j.a)(S,2),T=N[0],L=N[1],D=Object(a.useState)(!1),z=Object(j.a)(D,2),M=z[0],A=z[1],E=Object(a.useState)("Save location"),Y=Object(j.a)(E,2),G=Y[0],J=Y[1],H=Object(a.useState)(null),_=Object(j.a)(H,2),q=_[0],B=_[1],U=Object(a.useState)(e.location.coordinates?e.location.coordinates[0]:-73.51822),$=Object(j.a)(U,2),V=$[0],Z=$[1],Q=Object(a.useState)(e.location.coordinates?e.location.coordinates[1]:40.76127),W=Object(j.a)(Q,2),K=W[0],X=W[1],ee=Object(a.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){var t=new Ie.a.Map({container:k.current,style:"mapbox://styles/mapbox/streets-v11",center:[V,K],zoom:e.location.coordinates?12:4}),n=new Le.a({accessToken:Ie.a.accessToken,mapboxgl:Ie.a,marker:!1,flyTo:{speed:2}});t.addControl(n),t.addControl(new Ie.a.NavigationControl),t.addControl(new Ie.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,showUserLocation:!1}));var a=new Ie.a.Marker({draggable:!1}).setLngLat([V,K]).addTo(t);return t.on("movestart",(function(e){a.setLngLat(t.getCenter())})),t.on("move",(function(e){a.setLngLat(t.getCenter())})),t.on("moveend",(function(e){t.getCenter().lng.toFixed(4)===V.toFixed(4)&&t.getCenter().lat.toFixed(4)===K.toFixed(4)||ae(!0),A(!1),J("Save location"),a.setLngLat(t.getCenter())})),t.on("load",(function(){B(t)})),function(){return t.remove()}}),[V,K]);var re=function(){var e=Object(p.a)(b.a.mark((function e(){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:n=e.sent,(a=n.data)&&t(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k.current.style.pointerEvents="none",k.current.style.opacity=.5,L(!0),J("Saving location"),e.next=7,t={lng:q.getCenter().lng,lat:q.getCenter().lat},g.patch("/location/change",t);case 7:re(),k.current.style.pointerEvents="all",k.current.style.opacity=1,Z(q.getCenter().lng),X(q.getCenter().lat),L(!1),A(Object(C.jsx)(Re.a,{})),J("Saved location"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}var t}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"user-info-header",children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"".concat(c," ").concat(l)}),Object(C.jsxs)("div",{className:"user-score",children:[Object(C.jsx)(Ae,{level:5,children:"User score:"}),Object(C.jsx)(Me,{rating:e.rating})]})]}),Object(C.jsx)(pe.a,{}),Object(C.jsxs)(P.a,{gutter:16,children:[Object(C.jsxs)(F.a,{span:12,children:[Object(C.jsx)(Ae,{level:2,children:"User info:"}),Object(C.jsx)(Ae,{level:4,children:"First name:"}),Object(C.jsx)(Ee,{editable:{onChange:s},children:c}),Object(C.jsx)(Ae,{level:4,children:"Last name:"}),Object(C.jsx)(Ee,{editable:{onChange:d},children:l}),Object(C.jsx)(Ae,{level:4,children:"Store name:"}),Object(C.jsx)(Ee,{editable:{onChange:O},children:x}),Object(C.jsx)(Ae,{level:4,children:"Phone number:"}),Object(C.jsx)(Ee,{editable:{onChange:w},children:y})]}),Object(C.jsxs)(F.a,{span:12,className:"location-container",children:[!e.location.coordinates&&Object(C.jsx)(Pe.a,{message:"You won't me able to create products without saving a location",type:"warning",showIcon:!0}),Object(C.jsx)("div",{className:"map-container",ref:k,style:{height:"500px"}}),Object(C.jsxs)(Fe.b,{className:"location-buttons",style:ne?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"},children:[Object(C.jsx)(R.a,{type:"primary",shape:"round",size:"large",loading:T,icon:M,onClick:ce,children:G}),Object(C.jsx)(R.a,{danger:!0,shape:"round",size:"large",onClick:function(){q.flyTo({center:[V,K],speed:2,essential:!0}),ae(!1)},children:"Restore location"})]})]})]})]})},Ge=O.a.create({baseURL:"https://rentit-project.herokuapp.com/api/rent",withCredentials:!0}),Je=function(e){return Ge.get("/all/".concat(e))},He=function(e){return Ge.post("/preference",e)},_e=function(e){return Ge.post("/",e)},qe=n(55),Be=n.n(qe),Ue=n(202),$e=n(418),Ve=Ue.a.TabPane,Ze=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("renter"),s=Object(j.a)(c,2),o=s[0],i=s[1];function l(){return(l=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(null),e.next=4,Je(t);case 4:n=e.sent,a=n.data,console.log(a.rents),r(a.rents),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(a.useEffect)((function(){console.log(o),function(e){l.apply(this,arguments)}(o)}),[o]);var d=function(e,t,n){return"day"===t.type?Be()(e).format("YYYY/MM/DD"):Be()(e).format("YYYY/MM/DD HH:00")},u=[{title:"Product",dataIndex:"product",key:"product",render:function(e){return Object(C.jsx)("a",{children:e.name})}},{title:"Rented from",dataIndex:"rentedFrom",key:"rentedFrom",render:d},{title:"Rented to",dataIndex:"rentedTo",key:"rentedTo",render:d},{title:"Total",dataIndex:"total",key:"total",render:function(e,t,n){var a="$".concat(e," for ");return"day"===t.type?a+Be()(t.rentedTo).diff(Be()(t.rentedFrom),"days")+1:a+Be()(t.rentedTo).diff(Be()(t.rentedFrom),"hours")+1}},{title:"owner"===o?"Renter":"Owner",dataIndex:o,key:o,render:function(e){return"owner"===o?e.firstName:e.storeName?e.storeName:e.firstName}}];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"user-info-header",children:Object(C.jsx)(Fe.b,{size:"middle",children:Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Rents"})})}),Object(C.jsx)(pe.a,{}),Object(C.jsxs)(Ue.a,{onChange:function(e){console.log(e),i(1==e?"renter":"owner")},type:"card",children:[Object(C.jsx)(Ve,{tab:"Rented by me",children:n?Object(C.jsx)($e.a,{dataSource:n,columns:u}):Object(C.jsx)(oe.a,{active:!0})},"1"),Object(C.jsx)(Ve,{tab:"Owned by me",children:n?Object(C.jsx)($e.a,{dataSource:n,columns:u}):Object(C.jsx)(oe.a,{active:!0})},"2")]})]})},Qe=Ue.a.TabPane,We=function(){return Object(C.jsxs)(Ue.a,{onChange:function(e){console.log(e)},type:"card",children:[Object(C.jsx)(Qe,{tab:"Asked by me",children:Object(C.jsx)($e.a,{columns:[{title:"Name",dataIndex:"name",filters:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim"},{text:"Submenu",value:"Submenu",children:[{text:"Green",value:"Green"},{text:"Black",value:"Black"}]}],onFilter:function(e,t){return 0===t.name.indexOf(e)},sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend"]},{title:"Age",dataIndex:"age",defaultSortOrder:"descend",sorter:function(e,t){return e.age-t.age}},{title:"Address",dataIndex:"address",filters:[{text:"London",value:"London"},{text:"New York",value:"New York"}],filterMultiple:!1,onFilter:function(e,t){return 0===t.address.indexOf(e)},sorter:function(e,t){return e.address.length-t.address.length},sortDirections:["descend","ascend"]}],dataSource:[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park"},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park"},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park"},{key:"4",name:"Jim Red",age:32,address:"London No. 2 Lake Park"}],onChange:function(e,t,n,a){console.log("params",e,t,n,a)}})},"1"),Object(C.jsx)(Qe,{tab:"Asked to me",children:"Content of Tab Pane 2"},"2")]})},Ke=n(255),Xe=n(416),et=n(257),tt=n(258),nt=(de.a.Title,de.a.Text,function(){var e=I().user,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1];function s(){return(s=Object(p.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re(e._id,20);case 3:n=t.sent,a=n.data,c(a.products),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function o(){return(o=Object(p.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce(n);case 3:return t.next=5,re(e._id,20);case 5:a=t.sent,r=a.data,c(r.products),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]);var l=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(C.jsx)("a",{children:e})}},{title:"Price hour",dataIndex:"priceHour",key:"priceHour",render:function(e){return"$".concat(e)}},{title:"Price day",dataIndex:"priceDay",key:"priceDay",render:function(e){return e?"$".concat(e):"-"}},{title:"Category",dataIndex:"category",key:"category",render:function(e){return Object(C.jsx)(Ke.a,{color:"green",children:e})}},{title:"Description",dataIndex:"description",key:"description"},{title:"Rating",dataIndex:"rating",key:"rating",render:function(e){return 0===e.total?"-":e.total}},{title:"Action",key:"_id",align:"center",render:function(e){return Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(R.a,{type:"link",size:"large",children:Object(C.jsx)(et.a,{})}),Object(C.jsx)(Xe.a,{title:"Are you sure to delete this product?",placement:"topRight",onConfirm:function(){return function(e){return o.apply(this,arguments)}(e._id)},okText:"Delete",cancelText:"Cancel",children:Object(C.jsx)(R.a,{type:"link",danger:!0,size:"large",children:Object(C.jsx)(tt.a,{})})})]})}}];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"user-info-header",children:Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Products"}),e.location.coordinates?Object(C.jsx)(R.a,{type:"primary",icon:Object(C.jsx)(J.a,{}),size:"large",shape:"round",children:Object(C.jsx)(i.b,{to:"/profile/products/add",style:{color:"#fff"},children:"Add new"})}):Object(C.jsx)(R.a,{type:"primary",disabled:!0,size:"large",shape:"round",children:"Save your location to add products"})]})}),Object(C.jsx)(pe.a,{}),r?Object(C.jsx)($e.a,{dataSource:r,columns:l}):Object(C.jsx)(oe.a,{active:!0})]})}),at=n(137),rt=n(431),ct=n(420),st=at.a.Option,ot={labelCol:{span:8},wrapperCol:{span:24}},it={wrapperCol:{offset:0,span:16}};function lt(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var dt=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(j.a)(c,2),o=s[0],d=s[1],u=Object(a.useState)(""),h=Object(j.a)(u,2),x=h[0],g=h[1],m=Object(a.useState)([]),f=Object(j.a)(m,2),y=f[0],v=f[1],w=Object(a.useState)(!1),S=Object(j.a)(w,2),N=S[0],I=S[1],D=Object(l.g)().push,z=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"image/jpeg"===t.type||"image/png"===t.type||"image/webp"===t.type){e.next=4;break}return e.abrupt("return",k.a.error({message:"Something went wrong",description:"You can only upload a JPG/PNG/WEBP file!",duration:5,style:{borderRadius:"20px"}}));case 4:if(t.size/1024/1024<2){e.next=7;break}return e.abrupt("return",k.a.error({message:"Something went wrong",description:"Image must smaller than 2MB!",duration:5,style:{borderRadius:"20px"}}));case 7:return(n=new FormData).append("file",t),"https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n.append("upload_preset","rentit_product"),I(!0),e.next=14,O.a.post("https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n);case 14:a=e.sent,r=a.data,(c=y).push({uid:r.asset_id,name:r.original_filename,status:"done",url:r.secure_url}),v(c),I(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.url||t.preview){e.next=5;break}return e.next=4,lt(t.originFileObj);case 4:t.preview=e.sent;case 5:d(t.url||t.preview),r(!0),g(t.name||t.url.substring(t.url.lastIndexOf("/")+1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),A=Object(C.jsxs)("div",{children:[N?Object(C.jsx)(we.a,{}):Object(C.jsx)(J.a,{}),Object(C.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),E=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.images=y.map((function(e){return e.url})),e.prev=1,e.next=4,n=t,ee.post("/",n);case 4:k.a.success({message:"Product created!",description:"".concat(t.name," has been added successfully to your available rentals \ud83c\udf89"),duration:5,style:{borderRadius:"20px"}}),D("/profile/products"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(be.a,Object(Q.a)(Object(Q.a)({},ot),{},{name:"basic",initialValues:{remember:!0},onFinish:E,onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{label:"Product name:",name:"name",rules:[{required:!0,message:"Please input the product name!"}],children:Object(C.jsx)(T.a,{size:"large"})}),Object(C.jsxs)(P.a,{gutter:6,children:[Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{label:"Price per hour:",name:"priceHour",rules:[{required:!0,message:"Please input the price per hour!"}],children:Object(C.jsx)(rt.a,{defaultValue:1,min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})}),Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{label:"Price per day:",name:"priceDay",children:Object(C.jsx)(rt.a,{min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})})]}),Object(C.jsx)(be.a.Item,{label:"Category",name:"category",rules:[{required:!0,message:"Please select a category!"}],children:Object(C.jsxs)(at.a,{placeholder:"Please select a category",children:[Object(C.jsx)(st,{value:"tools",children:"Tools"}),Object(C.jsx)(st,{value:"technology",children:"Technology"}),Object(C.jsx)(st,{value:"vehicles",children:"Vehicles"}),Object(C.jsx)(st,{value:"sports",children:"Sports"}),Object(C.jsx)(st,{value:"other",children:"Other"})]})}),Object(C.jsx)(be.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input a description!"}],children:Object(C.jsx)(T.a.TextArea,{maxLength:2e3,showCount:!0,autoSize:{minRows:3,maxRows:8}})}),Object(C.jsx)(ct.a,{listType:"picture-card",fileList:y,beforeUpload:z,onPreview:M,method:"get",onRemove:function(e){var t=y.filter((function(t){return t.uid!==e.uid}));v(t)},children:y.length>=8?null:A}),Object(C.jsx)(L.a,{visible:n,title:x,footer:null,onCancel:function(){return r(!1)},children:Object(C.jsx)("img",{alt:"example",style:{width:"100%"},src:o})}),Object(C.jsx)(be.a.Item,Object(Q.a)(Object(Q.a)({},it),{},{children:Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",children:"Create"}),Object(C.jsx)(R.a,{danger:!0,size:"large",shape:"round",children:Object(C.jsx)(i.b,{to:"/profile/products/",children:"Cancel"})})]})}))]}))},jt=n(437),ut=function(){var e,t=Object(l.j)().path,n=I().user,a=[{title:"User info",link:t},{title:"My rents",link:"".concat(t,"/rents")},{title:"My questions",link:"".concat(t,"/questions")},{title:"My products",link:"".concat(t,"/products")}];return Object(C.jsxs)(P.a,{gutter:16,justify:"center",className:"main-row profile-row",children:[Object(C.jsx)(F.a,{xs:8,xl:6,children:Object(C.jsxs)("div",{className:"profile-cont side-menu-cont",children:[n.avatar?Object(C.jsx)(A.a,{size:150,src:n.avatar,style:{cursor:"pointer"}}):Object(C.jsx)(A.a,{size:150,style:(e={background:"rgb(0,161,186)"},Object(d.a)(e,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(d.a)(e,"cursor","pointer"),e),children:"".concat(n.firstName[0]).concat(n.lastName[0])}),Object(C.jsx)(jt.b,{size:"small",dataSource:a,renderItem:function(e){return Object(C.jsx)(jt.b.Item,{children:Object(C.jsx)(R.a,{type:"text",size:"large",children:Object(C.jsx)(i.b,{to:e.link,children:e.title})})})}})]})}),Object(C.jsx)(F.a,{xs:16,xl:14,children:Object(C.jsx)("div",{className:"profile-cont info-cont",children:Object(C.jsxs)(l.d,{children:[Object(C.jsx)(l.b,{component:Ye,path:t,exact:!0}),Object(C.jsx)(l.b,{component:Ze,path:"".concat(t,"/rents")}),Object(C.jsx)(l.b,{component:We,path:"".concat(t,"/questions")}),Object(C.jsx)(l.b,{component:nt,path:"".concat(t,"/products"),exact:!0}),Object(C.jsx)(l.b,{component:dt,path:"".concat(t,"/products/add")})]})})})]})},bt=n(428),pt=n(422),ht=n(84),xt=bt.a.Panel;Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var Ot=function(){var e=I().user,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],s=Object(a.useRef)(),o=Object(a.useState)(null),i=Object(j.a)(o,2),l=i[0],d=i[1],u=Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[0]:-58.401947),h=Object(j.a)(u,2),x=h[0],O=h[1],g=Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[1]:-34.595134),m=Object(j.a)(g,2),f=m[0],y=m[1],v=Object(a.useState)(1),w=Object(j.a)(v,2),k=w[0],S=w[1],N=Object(a.useState)(!0),T=Object(j.a)(N,2),L=T[0],R=T[1],D=Object(a.useState)(Object(C.jsx)("h3",{children:"Colse map"})),z=Object(j.a)(D,2),M=z[0],A=z[1],E=Object(a.useState)(!1),Y=Object(j.a)(E,2),G=Y[0],J=Y[1];function H(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(b.a.mark((function e(t,n,a){var r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(!0),r={limit:30,category:null,center:[t,n],radius:a},e.next=5,ne(r);case 5:s=e.sent,o=s.data,c(o.products),J(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}Object(a.useEffect)((function(){H(x,f,k)}),[]),Object(a.useEffect)((function(){var e=new Ie.a.Map({container:s.current,style:"mapbox://styles/mapbox/streets-v11",center:[x,f],zoom:12}),t=new Le.a({accessToken:Ie.a.accessToken,mapboxgl:Ie.a,marker:!1,flyTo:{speed:2}});e.addControl(t),e.addControl(new Ie.a.NavigationControl),e.addControl(new Ie.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,showUserLocation:!1}));var n=new Ie.a.Marker({draggable:!1}).setLngLat([x,f]).addTo(e);return e.on("movestart",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1))})),e.on("move",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1))})),e.on("moveend",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1)),H(e.getCenter().lng,e.getCenter().lat,k),B(e.getCenter().lng,e.getCenter().lat),d(e)})),e.on("load",(function(){d(e)})),e.on("load",(function(){e.addSource("polygon",q([e.getCenter().lng,e.getCenter().lat],k,!0)),e.addLayer({id:"polygon",type:"fill",source:"polygon",layout:{},paint:{"fill-color":"#5dbe8c","fill-opacity":.5}})})),function(){return e.remove()}}),[]);var q=function(e,t,n,a){a||(a=64);for(var r,c,s,o=e[1],i=e[0],l=t,d=[],j=l/(111.32*Math.cos(o*Math.PI/180)),u=l/110.574,b=0;b<a;b++)r=b/a*(2*Math.PI),c=j*Math.cos(r),s=u*Math.sin(r),d.push([i+c,o+s]);return d.push(d[0]),n?{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[d]}}]}}:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[d]}}]}},B=function(e,t){O(e),y(t)};return Object(C.jsxs)(P.a,{children:[Object(C.jsx)(F.a,{span:24,children:Object(C.jsx)(bt.a,{defaultActiveKey:["1"],bordered:!1,ghost:!0,onChange:function(){L?(A(Object(C.jsx)("h3",{children:"Open map"})),R(!1)):(A(Object(C.jsx)("h3",{children:"Close map"})),R(!0))},children:Object(C.jsx)(xt,{header:M,children:Object(C.jsx)("div",{className:"map-container",ref:s,style:{height:"400px"}})},"1")})}),Object(C.jsx)(F.a,{span:24,children:Object(C.jsxs)(P.a,{wrap:!1,children:[Object(C.jsx)(F.a,{flex:"220px",children:Object(C.jsx)(pt.a,{min:.5,max:20,onChange:function(e){S(e),l.getSource("polygon").setData(q([l.getCenter().lng,l.getCenter().lat],e,!1))},onAfterChange:function(e){S(e),H(x,f,e)},value:k,step:.5})}),Object(C.jsx)(F.a,{flex:"auto",children:Object(C.jsx)(P.a,{gutter:[16,16],style:{padding:"20px"},id:"latest-prods",children:!r||G?Object(C.jsx)(oe.a,{active:!0}):0===r.length?Object(C.jsx)(ht.a,{description:Object(C.jsx)("p",{children:"Sorry, it seems like there are no products here"})}):r.map((function(e){return Object(C.jsx)(le,{product:e})}))})})]})})]})},gt=n(252),mt=O.a.create({baseURL:"https://rentit-project.herokuapp.com/api/question",withCredentials:!0}),ft=function(e){return mt.post("",e)},yt=n(419),vt=n(424),wt=n(433),kt=n(417),Ct=n(82),St=de.a.Title,Nt=de.a.Text,It=de.a.Paragraph,Tt=yt.a.RangePicker;Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var Lt=function(){var e=Object(l.i)().id,t=Object(a.useRef)(),n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),d=Object(j.a)(o,2),u=d[0],h=d[1],x=be.a.useForm(),O=Object(j.a)(x,1)[0],g=Object(a.useState)(!1),m=Object(j.a)(g,2),f=m[0],y=m[1],v=Object(a.useState)(!1),w=Object(j.a)(v,2),S=w[0],N=w[1],I=Object(a.useState)(!1),L=Object(j.a)(I,2),D=L[0],z=L[1],M=Object(a.useState)(null),A=Object(j.a)(M,2),Y=A[0],G=A[1],J=Object(a.useState)(null),H=Object(j.a)(J,2),_=H[0],q=H[1],B=Object(a.useState)(null),U=Object(j.a)(B,2),$=U[0],V=U[1],Z=Object(a.useState)(0),Q=Object(j.a)(Z,2),W=Q[0],K=Q[1],X=Object(a.useState)(!1),ee=Object(j.a)(X,2),te=ee[0],ne=ee[1],re=Object(a.useState)(null),ce=Object(j.a)(re,2),se=ce[0],ie=ce[1],le=Object(a.useRef)(),de=Object(a.useState)(0),je=Object(j.a)(de,2),ue=je[0],xe=je[1],Oe=Object(a.useState)(0),ge=Object(j.a)(Oe,2),me=ge[0],fe=ge[1];Object(a.useEffect)((function(){function t(){return(t=Object(p.a)(b.a.mark((function t(){var n,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.split("-")[0],t.next=4,ae(n);case 4:a=t.sent,r=a.data,console.log(r),s(r),h(r.questions.reverse()),xe(r.owner.location.coordinates[0]),fe(r.owner.location.coordinates[1]),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){if(ue&&me){var e=new Ie.a.Map({container:le.current,style:"mapbox://styles/mapbox/streets-v11",center:[ue,me],zoom:12});return e.addControl(new Ie.a.NavigationControl),e.on("load",(function(){e.addSource("polygon",ye([ue,me],.8)),e.addLayer({id:"polygon",type:"fill",source:"polygon",layout:{},paint:{"fill-color":"#5dbe8c","fill-opacity":.5}})})),function(){return e.remove()}}}),[ue,me]);var ye=function(e,t,n){n||(n=64);for(var a,r,c,s=e[1],o=e[0],i=t,l=[],d=i/(111.32*Math.cos(s*Math.PI/180)),j=i/110.574,u=0;u<n;u++)a=u/n*(2*Math.PI),r=d*Math.cos(a),c=j*Math.sin(a),l.push([o+r,s+c]);return l.push(l[0]),{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[l]}}]}}};function ve(e,t,n){if(console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",t),console.log(n),"hours"===n?(N(!1),z(!0)):(N(!0),z(!1)),!e)return N(!1),z(!1),G(null),void ne(!1);if("hours"===n){var a=e[1].diff(e[0],"hours")+1;G(a),q(e[0]),V(e[1]),ne(!0),K(a*c.priceHour),we(c._id,c.name,a*c.priceHour,"for ".concat(a,a>1?" hours":" hour")),console.log(a)}else{var r=e[1].diff(e[0],"days")+1;G(r),q(e[0]),V(e[1]),ne(!0),K(r*c.priceDay),we(c._id,c.name,r*c.priceDay,"for ".concat(r,r>1?" days":" day")),console.log(r)}}var we=function(){var e=Object(p.a)(b.a.mark((function e(n,a,r,c){var s,o,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={productId:n,productName:a,total:r,time:c},console.log(s),e.next=5,He(s);case 5:o=e.sent,i=o.data,console.log(i),(l=document.createElement("script")).src="https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js",l.setAttribute("data-preference-id",i.preferenceId),l.setAttribute("data-button-label","Rent"),ie(i.preferenceId),t.current&&(t.current.innerHTML="",t.current.appendChild(l)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ke=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=S?"day":"hour",n={product:c._id,owner:c.owner._id,total:W,rentedFrom:_.toDate(),rentedTo:$.toDate(),type:t,preferenceId:se},console.log(n),e.next=6,_e(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function Ce(e){console.log("onOk: ",e)}function Se(e){return e<Be()().startOf("day")}var Ne=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),n={product:c._id,owner:c.owner,description:t.question},console.log(n),e.prev=3,e.next=6,ft(n);case 6:h([n].concat(Object(gt.a)(u))),console.log(u),y(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}}),y(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"product-cont",children:Object(C.jsxs)(P.a,{gutter:[18,18],justify:"center",className:"product-row",children:[Object(C.jsx)(F.a,{span:14,children:c?Object(C.jsx)(vt.a,{children:c.images.map((function(e){return Object(C.jsx)("img",{alt:"product image",src:e,className:"slider-image"})}))}):Object(C.jsx)(oe.a.Image,{className:"image-skeleton"})}),Object(C.jsx)(F.a,{span:10,children:c?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"product-breadcrumbs",children:[Object(C.jsx)(Ke.a,{children:Object(C.jsx)(i.b,{to:"/products",children:"products"})}),Object(C.jsx)(Ct.a,{}),Object(C.jsx)(Ke.a,{children:c.category})]}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:c.name}),Object(C.jsx)(Me,{rating:c.rating}),Object(C.jsx)(pe.a,{dashed:!0}),Object(C.jsxs)("section",{id:"price-cont",children:[Object(C.jsxs)(St,{level:2,style:{display:"inline-block"},children:["$",c.priceHour]}),Object(C.jsx)(Nt,{children:"/hr"}),Object(C.jsx)("br",{}),Object(C.jsx)(Tt,{showTime:{format:"HH"},format:"YYYY/MM/DD HH:00",onChange:function(e,t){return ve(e,t,"hours")},onOk:Ce,disabledDate:Se,disabled:S}),c.priceDay&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(St,{level:4,style:{marginTop:0},children:"or"}),Object(C.jsxs)(St,{level:2,style:{display:"inline-block",marginTop:0},children:["$",c.priceDay]}),Object(C.jsx)(Nt,{children:"/day"}),Object(C.jsx)("br",{}),Object(C.jsx)(Tt,{format:"YYYY/MM/DD",onChange:function(e,t){return ve(e,t,"days")},onOk:Ce,disabledDate:Se,disabled:D})]}),te?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"total-container",children:[Object(C.jsxs)(St,{level:2,children:["Total: $",W," "]}),S?Object(C.jsx)(Nt,{children:"(".concat(Y,Y>1?" days)":" day)")}):Object(C.jsx)(Nt,{children:"(".concat(Y,Y>1?" hours)":" hour)")})]}),Object(C.jsx)("div",{ref:t,className:"mp-bttn-container",onClick:ke})]}):Object(C.jsx)(E.a,{placement:"topLeft",title:Object(C.jsx)("span",{children:"Please select your time period for the rental"}),children:Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"background",element:"button",angle:"45deg",className:"add-rent add-rent-disabled ant-btn ant-btn-primary ant-btn-round ant-btn-lg",children:"Rent"})})]})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(oe.a.Button,{active:!0,size:"small",shape:"round"}),Object(C.jsx)(oe.a.Button,{active:!0,size:"small",shape:"round"}),Object(C.jsx)("br",{}),Object(C.jsx)(oe.a.Input,{style:{width:300,marginTop:"10px",marginBottom:"40px"},active:!0,size:"large"}),Object(C.jsx)(oe.a,{active:!0})]})}),c&&Object(C.jsxs)(F.a,{span:20,children:[Object(C.jsx)(pe.a,{}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h2",angle:"45deg",className:"ant-typography",children:"About"}),Object(C.jsx)(St,{level:4,children:"Description"}),Object(C.jsx)(It,{children:c.description}),Object(C.jsx)(St,{level:4,children:"Owner"}),Object(C.jsxs)(wt.b,{bordered:!0,children:[c.owner.storeName?Object(C.jsx)(wt.b.Item,{label:"Store name",span:3,children:c.owner.storeName}):Object(C.jsx)(wt.b.Item,{label:"Name",span:3,children:c.owner.firstName}),Object(C.jsx)(wt.b.Item,{label:"Owner rating",span:3,children:Object(C.jsx)(Me,{rating:c.owner.rating})}),Object(C.jsx)(wt.b.Item,{label:"Location",span:3,children:Object(C.jsx)("div",{className:"map-container",ref:le,style:{height:"300px"}})})]}),Object(C.jsx)(pe.a,{}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h2",angle:"45deg",className:"ant-typography",children:"Questions"}),Object(C.jsxs)(be.a,{form:O,onFinish:Ne,layout:"vertical",className:"question-form",children:[Object(C.jsx)(St,{level:4,children:"Ask something"}),Object(C.jsx)(be.a.Item,{name:"question",children:Object(C.jsx)(T.a.TextArea,{maxLength:1e3,showCount:!0,autoSize:{minRows:2,maxRows:4}})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",loading:f,children:"Ask"})]}),Object(C.jsx)(St,{level:4,children:"Previously asked"}),u.length>0?u.map((function(e){return Object(C.jsx)(kt.a,{content:Object(C.jsx)("p",{style:{fontSize:"1.2em"},children:e.description}),children:e.answer&&Object(C.jsx)(kt.a,{content:Object(C.jsx)("p",{children:e.answer})})})})):Object(C.jsx)(It,{children:"No questions yet. Be the first one to ask!"})]})]})})},Pt=de.a.Paragraph,Ft=de.a.Title,Rt=Object(C.jsx)(we.a,{style:{fontSize:40,color:"#5dbe8c"},spin:!0}),Dt=function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(j.a)(c,2),o=s[0],d=s[1],u=new URLSearchParams(Object(l.h)().search).get("preference_id");console.log(u);var h=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c={preferenceId:t,status:"in-progress"},Ge.patch("/update",c);case 3:n=e.sent,a=n.data,console.log(a),d(a),r(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var c}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(u)}),[]),Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont success-page",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsx)("div",{children:n||!o?Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(ve.a,{indicator:Rt})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"background",element:"span",angle:"45deg",className:"text ant-typography check-cont",children:Object(C.jsx)(Re.a,{})}),Object(C.jsx)(Ft,{level:2,children:"Thank you for your rent!"}),Object(C.jsxs)(Pt,{children:["Your rent for ",o.product.name," has successfully started!"]}),Object(C.jsx)(Pt,{children:"You can view more info in your profile page"}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(R.a,{type:"primary",size:"large",shape:"round",style:{height:"auto",padding:"6px 30px"},children:Object(C.jsx)(i.b,{to:"/profile/rents",style:{color:"#fff",fontSize:"1.5em"},children:"More info"})})})]})})})})};var zt=function(){return Object(C.jsx)(i.a,{children:Object(C.jsx)(Z,{children:Object(C.jsxs)(l.d,{children:[Object(C.jsx)(l.b,{component:ue,path:"/",exact:!0}),Object(C.jsx)(X,{component:me,path:"/login"}),Object(C.jsx)(X,{component:ye,path:"/signup"}),Object(C.jsx)(X,{component:Se,path:"/activate/:id"}),Object(C.jsx)(K,{component:ut,path:"/profile"}),Object(C.jsx)(l.b,{component:Ot,path:"/products"}),Object(C.jsx)(l.b,{component:Lt,path:"/product/:id"}),Object(C.jsx)(l.b,{component:Dt,path:"/success"})]})})})};n(405),n(406),n(407),n(408),n(409),n(410),n(411);s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(N,{children:Object(C.jsx)(zt,{})})}),document.getElementById("root")),o()}},[[412,1,2]]]);
//# sourceMappingURL=main.bbc33ec0.chunk.js.map
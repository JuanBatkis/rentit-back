(this["webpackJsonprentit-front"]=this["webpackJsonprentit-front"]||[]).push([[0],{394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(37),s=n.n(r),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},o=n(42),l=n(41),j=n(88),u=n(25),d=n(29),b=n.n(d),p=n(45);var h=function(e,t){var n=localStorage.getItem(t),c=n?JSON.parse(n):e,r=Object(a.useState)(c),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){localStorage.setItem(t,JSON.stringify(i))}),[i,t]),[i,o]},x=n(103),O=n.n(x),m=O.a.create({baseURL:"/api/auth",withCredentials:!0}),g=function(e){return m.post("/signup",e)},f=function(e){return m.post("/login",e)},y=function(e){return m.get("/logout")},v=function(e){return m.get("/session")},w=n(244),k=n(4),C=Object(a.createContext)(),S=function(e){var t=h(null,"user"),n=Object(u.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:n=e.sent,a=n.data,r(a),w.a.success({message:"Hello ".concat(a.firstName,"!"),description:"Thank you for logging in \ud83d\ude4c",duration:5,style:{borderRadius:"20px"}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function i(){return(i=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("/"),e.next=3,y();case 3:r(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,(n=t.data)&&r(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),Object(k.jsx)(C.Provider,{value:{user:c,login:function(e){return s.apply(this,arguments)},logout:function(e){return i.apply(this,arguments)}},children:e.children})},I=function(){return Object(a.useContext)(C)},N=n(412),T=n(409),L=n(121),P=n(72),R=n(43),F=n(413),z=n(97),E=n(234),_=n(415),A=n(47),D=n(94),J=n(420),M=n(245),G=n(421),H=N.a.Search,q=function(e){var t,n=e.push,c=I(),r=c.user,s=c.logout,i=Object(a.useState)(!1),l=Object(u.a)(i,2),d=l[0],b=l[1],p=Object(a.useState)(!1),h=Object(u.a)(p,2),x=h[0],O=h[1],m=T.a.confirm,g=function(){b(!1)},f=function(e){O(e)};return Object(k.jsxs)(L.a,{justify:"space-between",align:"middle",children:[Object(k.jsxs)(P.a,{span:4,children:[Object(k.jsx)(R.a,{type:"text",onClick:function(){b(!0)},size:"large",children:Object(k.jsx)(J.a,{})}),Object(k.jsx)(F.a,{placement:"left",closable:!0,onClose:g,visible:d,closeIcon:Object(k.jsx)(M.a,{rotate:45}),children:Object(k.jsxs)(z.a,{theme:"light",children:[Object(k.jsx)(z.a.Item,{onClick:g,children:Object(k.jsx)(o.b,{to:"/products",children:"Products"})},"1"),Object(k.jsx)(z.a.Item,{onClick:g,children:"nav 2"},"2"),Object(k.jsx)(z.a.Item,{onClick:g,children:"nav 3"},"3")]})})]}),Object(k.jsx)(P.a,{span:4,align:"middle",children:Object(k.jsx)(o.b,{to:"/",children:Object(k.jsx)("img",{alt:"RENTIT",src:"https://res.cloudinary.com/djv6xyyqp/image/upload/v1614452197/rentit/images/rentit-logoRecurso_8_1x_dc0e8o.png",style:{maxHeight:"44px"}})})}),Object(k.jsxs)(P.a,{span:4,align:"right",style:{display:"flex"},children:[Object(k.jsx)(H,{placeholder:"input search text",allowClear:!0,onSearch:function(e){return console.log(e)},style:{width:"calc(100% - 32px)",paddingRight:"10px"}}),r?Object(k.jsx)(E.a,{placement:"bottomRight",title:Object(k.jsx)("span",{children:"".concat(r.firstName,"  ").concat(r.lastName)}),content:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(R.a,{type:"text",onClick:function(){return f(!1)},children:Object(k.jsx)(o.b,{to:"/profile",children:"Profile"})}),Object(k.jsx)("br",{}),Object(k.jsx)(R.a,{type:"text",onClick:function(){f(!1),m({icon:Object(k.jsx)(D.a,{}),content:Object(k.jsx)("h3",{children:"Are you sure you want to log out?"}),maskClosable:!0,onOk:function(){s(n)}})},children:"Log out"})]}),trigger:"click",visible:x,onVisibleChange:f,children:r.avatar?Object(k.jsx)(_.a,{src:r.avatar,style:{cursor:"pointer"}}):Object(k.jsx)(_.a,{style:(t={background:"rgb(0,161,186)"},Object(j.a)(t,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(j.a)(t,"cursor","pointer"),t),children:"".concat(r.firstName[0]).concat(r.lastName[0])})}):Object(k.jsx)(A.a,{placement:"bottom",title:"Login/Signup",children:Object(k.jsx)(o.b,{to:"/login",style:{display:"flex",alignItems:"center"},children:Object(k.jsx)(G.a,{style:{fontSize:"1.6em",color:"rgba(0, 0, 0, 0.85)"}})})})]})]})},B=n(400),U=B.a.Header,V=B.a.Content,$=B.a.Footer,Y=function(e){var t,n=e.children,a=Object(l.g)().push;return"/"===Object(l.h)().pathname&&(t={position:"absolute"}),Object(k.jsxs)(B.a,{className:"layout",children:[Object(k.jsx)(U,{style:t,children:Object(k.jsx)(q,{push:a})}),Object(k.jsx)(V,{children:Object(k.jsx)("div",{className:"site-layout-content",children:n})}),Object(k.jsxs)($,{style:{textAlign:"center"},children:["RENTIT \xa92020 Created by ",Object(k.jsxs)("a",{href:"https://github.com/JuanBatkis",target:"_blank",children:["Juan Batkis ",Object(k.jsx)("span",{style:{fontSize:"1.2em"},children:"\ud83d\udc4b"})]})]})]})},Z=n(61),Q=n(170),W=function(e){var t=e.component,n=Object(Q.a)(e,["component"]),a=I().user;return Object(k.jsx)(l.b,Object(Z.a)(Object(Z.a)({},n),{},{render:function(e){return a?Object(k.jsx)(t,Object(Z.a)({},e)):(w.a.error({message:"Something went wrong",description:"You must be logged in to access this section",duration:5,style:{borderRadius:"20px"}}),Object(k.jsx)(l.a,{to:"/login"}))}}))},K=function(e){var t=e.component,n=Object(Q.a)(e,["component"]),a=I().user;return Object(k.jsx)(l.b,Object(Z.a)(Object(Z.a)({},n),{},{render:function(e){return a?Object(k.jsx)(l.a,{to:"/profile"}):Object(k.jsx)(t,Object(Z.a)({},e))}}))},X=O.a.create({baseURL:"/api/product",withCredentials:!0}),ee=function(e){return X.get("/all/".concat(e))},te=function(e,t){return X.get("/user/".concat(e,"/").concat(t))},ne=function(e){return X.delete("/".concat(e))},ae=n(404),ce=n(408),re=ae.a.Meta,se=function(e){var t=e.product;return Object(k.jsx)(P.a,{span:6,children:Object(k.jsx)(ae.a,{hoverable:!0,cover:t.images[0]?Object(k.jsx)("img",{alt:"product image",src:t.images[0],style:{height:"320px",objectFit:"contain",padding:"1px"}}):Object(k.jsx)(ce.a.Image,{style:{height:"320px",width:"100%"}}),children:Object(k.jsx)(re,{title:t.name,description:t.priceDay?"$".concat(t.priceHour,"/hr or $").concat(t.priceDay,"/day"):"$".concat(t.priceHour,"/hr")})})})},ie=n(407),oe=ie.a.Title,le=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(),s=Object(a.useRef)();Object(a.useRef)();Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(4);case 2:t=e.sent,n=t.data,console.log(n.products),c(n.products);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("section",{id:"main-banner",children:Object(k.jsxs)(L.a,{className:"full-heigh",justify:"center",align:"middle",children:[Object(k.jsx)(P.a,{span:7,offset:2,children:Object(k.jsx)(oe,{children:"A new way to get what you need"})}),Object(k.jsxs)(P.a,{span:15,className:"full-heigh iframe-container",children:[Object(k.jsx)("div",{id:"iframeCover",ref:s,style:{opacity:"1"}}),Object(k.jsx)("iframe",{src:"https://my.spline.design/floating-adbb8c927f6e8e69a180701a9fb2ad6c/",frameBorder:"0",width:"100%",height:"100%",onLoad:function(){r.current.style.opacity="1",s.current.style.opacity="0"},ref:r})]})]})}),Object(k.jsx)(L.a,{gutter:16,style:{padding:"20px"},id:"latest-prods",children:n?n.map((function(e){return Object(k.jsx)(se,{product:e})})):Object(k.jsx)(ce.a,{active:!0})})]})},je=n(406),ue=n(401),de=n(82),be=n(422),pe=n(423),he=ie.a.Text,xe=function(){var e=je.a.useForm(),t=Object(u.a)(e,1)[0],n=I().login;return Object(k.jsx)(L.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(k.jsx)(P.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(k.jsxs)("div",{children:[Object(k.jsx)(de.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Login"}),Object(k.jsxs)(je.a,{form:t,onFinish:function(e){n(e)},layout:"vertical",children:[Object(k.jsx)(je.a.Item,{name:"email",label:"Email:",children:Object(k.jsx)(N.a,{type:"email"})}),Object(k.jsx)(je.a.Item,{name:"password",label:"Password:",children:Object(k.jsx)(N.a.Password,{})}),Object(k.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Log me in!"})]}),Object(k.jsx)(ue.a,{id:"socialDivider",children:"Or connect with"}),Object(k.jsxs)(L.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(k.jsx)(P.a,{span:6,align:"middle",children:Object(k.jsx)("a",{href:"/api/auth/google",children:Object(k.jsx)(be.a,{})})}),Object(k.jsx)(P.a,{span:6,align:"middle",children:Object(k.jsx)("a",{href:"/api/auth/facebook",children:Object(k.jsx)(pe.a,{})})}),Object(k.jsx)(P.a,{span:24,align:"middle",className:"changeAuth",children:Object(k.jsxs)(he,{children:["Don't have an account? ",Object(k.jsx)(o.b,{to:"/signup",children:"Sign up here!"})]})})]})]})})})},Oe=ie.a.Text,me=function(){var e=je.a.useForm(),t=Object(u.a)(e,1)[0],n=Object(l.g)().push;function a(){return(a=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:w.a.success({message:"Account created!",description:"Hello ".concat(t.firstName," \ud83d\udc4b. Please check your email to verify your account"),duration:5,style:{borderRadius:"20px"}}),n("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(k.jsx)(L.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(k.jsx)(P.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(k.jsxs)("div",{children:[Object(k.jsx)(de.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Sign up"}),Object(k.jsxs)(je.a,{form:t,onFinish:function(e){return a.apply(this,arguments)},layout:"vertical",children:[Object(k.jsx)(je.a.Item,{name:"email",label:"Email:",children:Object(k.jsx)(N.a,{type:"email"})}),Object(k.jsxs)(L.a,{gutter:6,children:[Object(k.jsx)(P.a,{span:12,children:Object(k.jsx)(je.a.Item,{name:"firstName",label:"First name:",children:Object(k.jsx)(N.a,{})})}),Object(k.jsx)(P.a,{span:12,children:Object(k.jsx)(je.a.Item,{name:"lastName",label:"Last name:",children:Object(k.jsx)(N.a,{})})})]}),Object(k.jsx)(je.a.Item,{name:"storeName",label:"Store name:",children:Object(k.jsx)(N.a,{})}),Object(k.jsx)(je.a.Item,{name:"phone",label:"Phone:",children:Object(k.jsx)(N.a,{})}),Object(k.jsx)(je.a.Item,{name:"password",label:"Password:",children:Object(k.jsx)(N.a.Password,{})}),Object(k.jsx)(je.a.Item,{name:"confirmPassword",label:"Confirm password:",children:Object(k.jsx)(N.a.Password,{})}),Object(k.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Sign me up!"})]}),Object(k.jsx)(ue.a,{id:"socialDivider",children:"Or connect with"}),Object(k.jsxs)(L.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(k.jsx)(P.a,{span:6,align:"middle",children:Object(k.jsx)("a",{href:"/api/auth/google",children:Object(k.jsx)(be.a,{})})}),Object(k.jsx)(P.a,{span:6,align:"middle",children:Object(k.jsx)("a",{href:"/api/auth/facebook",children:Object(k.jsx)(pe.a,{})})}),Object(k.jsx)(P.a,{span:24,align:"middle",className:"changeAuth",children:Object(k.jsxs)(Oe,{children:["Already have an account? ",Object(k.jsx)(o.b,{to:"/login",children:"Log in here!"})]})})]})]})})})},ge=n(52),fe=n.n(ge),ye=(n(220),n(165)),ve=n.n(ye),we=(n(224),n(416)),ke=n(417),Ce=n(118),Se=n(410),Ie=ie.a.Text,Ne=function(e){var t=e.rating,n=t.one+t.two+t.three+t.four+t.five;return Object(k.jsxs)("div",{children:[Object(k.jsx)(Se.a,{allowHalf:!0,disabled:!0,defaultValue:t.total}),Object(k.jsx)(Ie,{children:" (".concat(n,1===n?" rating)":" ratings)")})]})};fe.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA";var Te=ie.a.Title,Le=ie.a.Text,Pe=function(){var e=I().user,t=Object(a.useState)(e.firstName),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(e.lastName),i=Object(u.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(e.storeName),d=Object(u.a)(j,2),h=d[0],x=d[1],O=Object(a.useState)(e.phone),g=Object(u.a)(O,2),f=g[0],y=g[1];console.log(e.location.coordinates);var v=Object(a.useRef)(),w=Object(a.useState)(!1),C=Object(u.a)(w,2),S=C[0],N=C[1],T=Object(a.useState)(!1),F=Object(u.a)(T,2),z=F[0],E=F[1],_=Object(a.useState)("Save location"),A=Object(u.a)(_,2),D=A[0],J=A[1],M=Object(a.useState)(null),G=Object(u.a)(M,2),H=G[0],q=G[1],B=Object(a.useState)(e.location.coordinates?e.location.coordinates[0]:-73.51822),U=Object(u.a)(B,2),V=U[0],$=U[1],Y=Object(a.useState)(e.location.coordinates?e.location.coordinates[1]:40.76127),Z=Object(u.a)(Y,2),Q=Z[0],W=Z[1],K=Object(a.useState)(!1),X=Object(u.a)(K,2),ee=X[0],te=X[1];Object(a.useEffect)((function(){var t=new fe.a.Map({container:v.current,style:"mapbox://styles/mapbox/streets-v11",center:[V,Q],zoom:e.location.coordinates?12:4}),n=new ve.a({accessToken:fe.a.accessToken,mapboxgl:fe.a,marker:!1,flyTo:{speed:2}});t.addControl(n),t.addControl(new fe.a.NavigationControl);var a=new fe.a.Marker({draggable:!0}).setLngLat([V,Q]).addTo(t);return t.on("movestart",(function(e){a.setLngLat(t.getCenter())})),t.on("move",(function(e){a.setLngLat(t.getCenter())})),t.on("moveend",(function(e){console.log(t.getCenter()),t.getCenter().lng.toFixed(4)===V.toFixed(4)&&t.getCenter().lat.toFixed(4)===Q.toFixed(4)||te(!0),E(!1),J("Save location"),a.setLngLat(t.getCenter())})),t.on("load",(function(){q(t)})),function(){return t.remove()}}),[V,Q]);var ne=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.current.style.pointerEvents="none",v.current.style.opacity=.5,N(!0),J("Saving location"),e.next=6,t={lng:H.getCenter().lng,lat:H.getCenter().lat},m.patch("/location/change",t);case 6:v.current.style.pointerEvents="all",v.current.style.opacity=1,$(H.getCenter().lng),W(H.getCenter().lat),N(!1),E(Object(k.jsx)(Ce.a,{})),J("Saved location");case 13:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"user-info-header",children:[Object(k.jsx)(de.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"".concat(c," ").concat(o)}),Object(k.jsxs)("div",{className:"user-score",children:[Object(k.jsx)(Te,{level:5,children:"User score:"}),Object(k.jsx)(Ne,{rating:e.rating})]})]}),Object(k.jsx)(ue.a,{}),Object(k.jsxs)(L.a,{gutter:16,children:[Object(k.jsxs)(P.a,{span:12,children:[Object(k.jsx)(Te,{level:2,children:"User info:"}),Object(k.jsx)(Te,{level:4,children:"First name:"}),Object(k.jsx)(Le,{editable:{onChange:r},children:c}),Object(k.jsx)(Te,{level:4,children:"Last name:"}),Object(k.jsx)(Le,{editable:{onChange:l},children:o}),Object(k.jsx)(Te,{level:4,children:"Store name:"}),Object(k.jsx)(Le,{editable:{onChange:x},children:h}),Object(k.jsx)(Te,{level:4,children:"Phone number:"}),Object(k.jsx)(Le,{editable:{onChange:y},children:f})]}),Object(k.jsxs)(P.a,{span:12,className:"location-container",children:[!e.location.coordinates&&Object(k.jsx)(we.a,{message:"You won't me able to create products without saving a location",type:"warning",showIcon:!0}),Object(k.jsx)("div",{className:"map-container",ref:v,style:{height:"500px"}}),Object(k.jsxs)(ke.b,{className:"location-buttons",style:ee?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"},children:[Object(k.jsx)(R.a,{type:"primary",shape:"round",size:"large",loading:S,icon:z,onClick:ne,children:D}),Object(k.jsx)(R.a,{danger:!0,shape:"round",size:"large",onClick:function(){H.flyTo({center:[V,Q],speed:2,essential:!0}),te(!1)},children:"Restore location"})]})]})]})]})},Re=n(418),Fe=n(402),ze=n(403),Ee=n(246),_e=n(247),Ae=(ie.a.Title,ie.a.Text,function(){var e=I().user,t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(p.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e._id,20);case 2:n=t.sent,a=n.data,r(a.products);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(n);case 2:return t.next=4,te(e._id,20);case 4:a=t.sent,c=a.data,r(c.products);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]);var l=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(k.jsx)("a",{children:e})}},{title:"Price hour",dataIndex:"priceHour",key:"priceHour",render:function(e){return"$".concat(e)}},{title:"Price day",dataIndex:"priceDay",key:"priceDay",render:function(e){return e?"$".concat(e):"-"}},{title:"Category",dataIndex:"category",key:"category",render:function(e){return Object(k.jsx)(Re.a,{color:"green",children:e})}},{title:"Description",dataIndex:"description",key:"description"},{title:"Rating",dataIndex:"rating",key:"rating",render:function(e){return 0===e.total?"-":e.total}},{title:"Action",key:"_id",align:"center",render:function(e){return console.log(e._id),Object(k.jsxs)(ke.b,{size:"middle",children:[Object(k.jsx)(R.a,{type:"link",size:"large",children:Object(k.jsx)(Ee.a,{})}),Object(k.jsx)(Fe.a,{title:"Are you sure to delete this product?",placement:"topRight",onConfirm:function(){return function(e){return i.apply(this,arguments)}(e._id)},okText:"Delete",cancelText:"Cancel",children:Object(k.jsx)(R.a,{type:"link",danger:!0,size:"large",children:Object(k.jsx)(_e.a,{})})})]})}}];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"user-info-header",children:Object(k.jsxs)(ke.b,{size:"middle",children:[Object(k.jsx)(de.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Products"}),e.location.coordinates?Object(k.jsx)(R.a,{type:"primary",icon:Object(k.jsx)(M.a,{}),size:"large",shape:"round",children:Object(k.jsx)(o.b,{to:"/profile/products/add",style:{color:"#fff"},children:"Add new"})}):Object(k.jsx)(R.a,{type:"primary",disabled:!0,size:"large",shape:"round",children:"Save your location to add products"})]})}),Object(k.jsx)(ue.a,{}),c?Object(k.jsx)(ze.a,{dataSource:c,columns:l}):Object(k.jsx)(ce.a,{active:!0})]})}),De=n(132),Je=n(414),Me=n(405),Ge=n(67),He=De.a.Option,qe={labelCol:{span:8},wrapperCol:{span:24}},Be={wrapperCol:{offset:0,span:16}};function Ue(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var Ve=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],j=s[1],d=Object(a.useState)(""),h=Object(u.a)(d,2),x=h[0],m=h[1],g=Object(a.useState)([]),f=Object(u.a)(g,2),y=f[0],v=f[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),I=S[0],F=S[1],z=Object(l.g)().push,E=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/jpeg"===t.type||"image/png"===t.type||"image/webp"===t.type){e.next=3;break}return e.abrupt("return",w.a.error({message:"Something went wrong",description:"You can only upload a JPG/PNG/WEBP file!",duration:5,style:{borderRadius:"20px"}}));case 3:if(t.size/1024/1024<2){e.next=6;break}return e.abrupt("return",w.a.error({message:"Something went wrong",description:"Image must smaller than 2MB!",duration:5,style:{borderRadius:"20px"}}));case 6:return(n=new FormData).append("file",t),"https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n.append("upload_preset","rentit_product"),F(!0),e.next=13,O.a.post("https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n);case 13:a=e.sent,c=a.data,(r=y).push({uid:c.asset_id,name:c.original_filename,status:"done",url:c.secure_url}),v(r),F(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ue(t.originFileObj);case 3:t.preview=e.sent;case 4:j(t.url||t.preview),c(!0),m(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(k.jsxs)("div",{children:[I?Object(k.jsx)(Ge.a,{}):Object(k.jsx)(M.a,{}),Object(k.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),D=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.images=y.map((function(e){return e.url})),console.log("Success:",t),e.prev=2,e.next=5,n=t,X.post("/",n);case 5:w.a.success({message:"Product created!",description:"".concat(t.name," has been added successfully to your available rentals \ud83c\udf89"),duration:5,style:{borderRadius:"20px"}}),z("/profile/products"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),w.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 12:case"end":return e.stop()}var n}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(je.a,Object(Z.a)(Object(Z.a)({},qe),{},{name:"basic",initialValues:{remember:!0},onFinish:D,onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",children:[Object(k.jsx)(je.a.Item,{label:"Product name:",name:"name",rules:[{required:!0,message:"Please input the product name!"}],children:Object(k.jsx)(N.a,{size:"large"})}),Object(k.jsxs)(L.a,{gutter:6,children:[Object(k.jsx)(P.a,{span:12,children:Object(k.jsx)(je.a.Item,{label:"Price per hour:",name:"priceHour",rules:[{required:!0,message:"Please input the price per hour!"}],children:Object(k.jsx)(Je.a,{defaultValue:1,min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})}),Object(k.jsx)(P.a,{span:12,children:Object(k.jsx)(je.a.Item,{label:"Price per day:",name:"priceDay",children:Object(k.jsx)(Je.a,{min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})})]}),Object(k.jsx)(je.a.Item,{label:"Category",name:"category",rules:[{required:!0,message:"Please select a category!"}],children:Object(k.jsxs)(De.a,{placeholder:"Please select a category",children:[Object(k.jsx)(He,{value:"tools",children:"Tools"}),Object(k.jsx)(He,{value:"technology",children:"Technology"}),Object(k.jsx)(He,{value:"vehicles",children:"Vehicles"}),Object(k.jsx)(He,{value:"sports",children:"Sports"}),Object(k.jsx)(He,{value:"other",children:"Other"})]})}),Object(k.jsx)(je.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input a description!"}],children:Object(k.jsx)(N.a.TextArea,{maxLength:2e3,showCount:!0,autoSize:{minRows:3,maxRows:8}})}),Object(k.jsx)(Me.a,{listType:"picture-card",fileList:y,beforeUpload:E,onPreview:_,method:"get",onRemove:function(e){console.log("hey"),console.log(e),console.log(y);var t=y.filter((function(t){return t.uid!==e.uid}));console.log(t),v(t)},children:y.length>=8?null:A}),Object(k.jsx)(T.a,{visible:n,title:x,footer:null,onCancel:function(){return c(!1)},children:Object(k.jsx)("img",{alt:"example",style:{width:"100%"},src:i})}),Object(k.jsx)(je.a.Item,Object(Z.a)(Object(Z.a)({},Be),{},{children:Object(k.jsxs)(ke.b,{size:"middle",children:[Object(k.jsx)(R.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",children:"Create"}),Object(k.jsx)(R.a,{danger:!0,size:"large",shape:"round",children:Object(k.jsx)(o.b,{to:"/profile/products/",children:"Cancel"})})]})}))]}))},$e=n(419),Ye=function(){var e,t=Object(l.i)().path,n=I().user,a=[{title:"User info",link:t},{title:"My rents",link:"".concat(t,"/rents")},{title:"My questions",link:"".concat(t,"/questions")},{title:"My products",link:"".concat(t,"/products")}];return Object(k.jsxs)(L.a,{gutter:16,justify:"center",className:"main-row profile-row",children:[Object(k.jsx)(P.a,{xs:8,xl:6,children:Object(k.jsxs)("div",{className:"profile-cont side-menu-cont",children:[n.avatar?Object(k.jsx)(_.a,{size:150,src:n.avatar,style:{cursor:"pointer"}}):Object(k.jsx)(_.a,{size:150,style:(e={background:"rgb(0,161,186)"},Object(j.a)(e,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(j.a)(e,"cursor","pointer"),e),children:"".concat(n.firstName[0]).concat(n.lastName[0])}),Object(k.jsx)($e.b,{size:"small",dataSource:a,renderItem:function(e){return Object(k.jsx)($e.b.Item,{children:Object(k.jsx)(R.a,{type:"text",size:"large",children:Object(k.jsx)(o.b,{to:e.link,children:e.title})})})}})]})}),Object(k.jsx)(P.a,{xs:16,xl:14,children:Object(k.jsx)("div",{className:"profile-cont info-cont",children:Object(k.jsxs)(l.d,{children:[Object(k.jsx)(l.b,{component:Pe,path:t,exact:!0}),Object(k.jsx)(l.b,{component:function(){return"Rents"},path:"".concat(t,"/rents")}),Object(k.jsx)(l.b,{component:function(){return"Questions"},path:"".concat(t,"/questions")}),Object(k.jsx)(l.b,{component:Ae,path:"".concat(t,"/products"),exact:!0}),Object(k.jsx)(l.b,{component:Ve,path:"".concat(t,"/products/add")})]})})})]})},Ze=n(411),Qe=Ze.a.Panel;fe.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA";var We=function(){var e=I().user,t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),o=(i[0],i[1]),l=Object(a.useRef)(),j=Object(a.useState)(null),d=Object(u.a)(j,2),h=(d[0],d[1]),x=Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[0]:-70.9),O=Object(u.a)(x,2),m=O[0],g=(O[1],Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[1]:42.35)),f=Object(u.a)(g,2),y=f[0],v=(f[1],Object(a.useState)(!0)),w=Object(u.a)(v,2),C=w[0],S=w[1],N=Object(a.useState)(Object(k.jsx)("h3",{children:"Colse map"})),T=Object(u.a)(N,2),R=T[0],F=T[1];Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:t=e.sent,n=t.data,r(n.products),a=n.products.map((function(e){return e.owner})),c=a.filter((function(e,t,n){return n.findIndex((function(t){return t._id===e._id}))===t})),console.log(c),o(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=new fe.a.Map({container:l.current,style:"mapbox://styles/mapbox/streets-v11",center:[m,y],zoom:12}),t=new ve.a({accessToken:fe.a.accessToken,mapboxgl:fe.a,marker:!1,flyTo:{speed:2}});e.addControl(t),e.addControl(new fe.a.NavigationControl),e.addControl(new fe.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,showUserLocation:!1}));var n=new fe.a.Marker({draggable:!0}).setLngLat([m,y]).addTo(e);return e.on("movestart",(function(t){n.setLngLat(e.getCenter())})),e.on("move",(function(t){n.setLngLat(e.getCenter())})),e.on("moveend",(function(t){n.setLngLat(e.getCenter())})),e.on("load",(function(){h(e)})),function(){return e.remove()}}),[m,y]);return Object(k.jsxs)(L.a,{gutter:16,children:[Object(k.jsx)(P.a,{span:24,children:Object(k.jsx)(Ze.a,{defaultActiveKey:["1"],bordered:!1,ghost:!0,onChange:function(){C?(F(Object(k.jsx)("h3",{children:"Open map"})),S(!1)):(F(Object(k.jsx)("h3",{children:"Close map"})),S(!0))},children:Object(k.jsx)(Qe,{header:R,children:Object(k.jsx)("div",{className:"map-container",ref:l,style:{height:"400px"}})},"1")})}),Object(k.jsx)(P.a,{flex:"220px",children:Object(k.jsx)("h3",{children:"filters"})}),Object(k.jsx)(P.a,{flex:"auto",children:Object(k.jsx)(L.a,{gutter:[16,16],style:{padding:"20px"},id:"latest-prods",children:c?c.map((function(e){return Object(k.jsx)(se,{product:e})})):Object(k.jsx)(ce.a,{active:!0})})})]})};var Ke=function(){return Object(k.jsx)(o.a,{children:Object(k.jsx)(Y,{children:Object(k.jsxs)(l.d,{children:[Object(k.jsx)(l.b,{component:le,path:"/",exact:!0}),Object(k.jsx)(K,{component:me,path:"/signup"}),Object(k.jsx)(K,{component:xe,path:"/login"}),Object(k.jsx)(W,{component:Ye,path:"/profile"}),Object(k.jsx)(l.b,{component:We,path:"/products"})]})})})};n(393),n(394),n(395),n(396),n(397);s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(S,{children:Object(k.jsx)(Ke,{})})}),document.getElementById("root")),i()}},[[398,1,2]]]);
//# sourceMappingURL=main.c17dbe00.chunk.js.map
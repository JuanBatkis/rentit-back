(this["webpackJsonprentit-front"]=this["webpackJsonprentit-front"]||[]).push([[0],{406:function(e,t,n){},407:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(40),s=n.n(r),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,442)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},i=n(37),l=n(47),j=n(94),d=n(20),u=n(27),b=n.n(u),p=n(36);var h=function(e,t){var n=localStorage.getItem(t),c=n?JSON.parse(n):e,r=Object(a.useState)(c),s=Object(d.a)(r,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){localStorage.setItem(t,JSON.stringify(o))}),[o,t]),[o,i]},O=n(75),x=n.n(O),g=x.a.create({baseURL:"/api/auth",withCredentials:!0}),m=function(e){return g.post("/signup",e)},f=function(e){return g.post("/login",e)},y=function(e){return g.get("/logout")},v=function(e){return g.get("/session")},w=function(e){return g.patch("/verify",e)},k=n(254),C=n(3),S=Object(a.createContext)(),N=function(e){var t=h(null,"user"),n=Object(d.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:n=e.sent,a=n.data,r(a),k.a.success({message:"Hello ".concat(a.firstName,"!"),description:"Thank you for logging in \ud83d\ude4c",duration:5,style:{borderRadius:"20px"}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function o(){return(o=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("/"),e.next=3,y();case 3:r(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,(n=t.data)&&r(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),Object(C.jsx)(S.Provider,{value:{user:c,login:function(e){return s.apply(this,arguments)},logout:function(e){return o.apply(this,arguments)},setUser:r},children:e.children})},I=function(){return Object(a.useContext)(S)},T=n(429),L=n(426),P=n(125),F=n(73),R=n(46),z=n(430),D=n(103),A=n(244),M=n(432),E=n(48),J=n(100),G=n(438),_=n(256),H=n(439),Y=T.a.Search,q=function(e){var t,n=e.push,c=I(),r=c.user,s=c.logout,o=Object(a.useState)(!1),l=Object(d.a)(o,2),u=l[0],b=l[1],p=Object(a.useState)(!1),h=Object(d.a)(p,2),O=h[0],x=h[1],g=L.a.confirm,m=function(){b(!1)},f=function(e){x(e)};return Object(C.jsxs)(P.a,{justify:"space-between",align:"middle",children:[Object(C.jsxs)(F.a,{span:4,children:[Object(C.jsx)(R.a,{type:"text",onClick:function(){b(!0)},size:"large",children:Object(C.jsx)(G.a,{})}),Object(C.jsx)(z.a,{placement:"left",closable:!0,onClose:m,visible:u,closeIcon:Object(C.jsx)(_.a,{rotate:45}),children:Object(C.jsxs)(D.a,{theme:"light",children:[Object(C.jsx)(D.a.Item,{onClick:m,children:Object(C.jsx)(i.b,{to:"/products",children:"Products"})},"1"),Object(C.jsx)(D.a.Item,{onClick:m,children:"nav 2"},"2"),Object(C.jsx)(D.a.Item,{onClick:m,children:"nav 3"},"3")]})})]}),Object(C.jsx)(F.a,{span:4,align:"middle",children:Object(C.jsx)(i.b,{to:"/",children:Object(C.jsx)("img",{alt:"RENTIT",src:"https://res.cloudinary.com/djv6xyyqp/image/upload/v1614452197/rentit/images/rentit-logoRecurso_8_1x_dc0e8o.png",style:{maxHeight:"44px"}})})}),Object(C.jsxs)(F.a,{span:4,align:"right",style:{display:"flex"},children:[Object(C.jsx)(Y,{placeholder:"input search text",allowClear:!0,onSearch:function(e){return console.log(e)},style:{width:"calc(100% - 32px)",paddingRight:"10px"}}),r?Object(C.jsx)(A.a,{placement:"bottomRight",title:Object(C.jsx)("span",{children:"".concat(r.firstName,"  ").concat(r.lastName)}),content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(R.a,{type:"text",onClick:function(){return f(!1)},children:Object(C.jsx)(i.b,{to:"/profile",children:"Profile"})}),Object(C.jsx)("br",{}),Object(C.jsx)(R.a,{type:"text",onClick:function(){f(!1),g({icon:Object(C.jsx)(J.a,{}),content:Object(C.jsx)("h3",{children:"Are you sure you want to log out?"}),maskClosable:!0,onOk:function(){s(n)}})},children:"Log out"})]}),trigger:"click",visible:O,onVisibleChange:f,children:r.avatar?Object(C.jsx)(M.a,{src:r.avatar,style:{cursor:"pointer"}}):Object(C.jsx)(M.a,{style:(t={background:"rgb(0,161,186)"},Object(j.a)(t,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(j.a)(t,"cursor","pointer"),t),children:"".concat(r.firstName[0]).concat(r.lastName[0])})}):Object(C.jsx)(E.a,{placement:"bottom",title:"Login/Signup",children:Object(C.jsx)(i.b,{to:"/login",style:{display:"flex",alignItems:"center"},children:Object(C.jsx)(H.a,{style:{fontSize:"1.6em",color:"rgba(0, 0, 0, 0.85)"}})})})]})]})},B=n(414),U=B.a.Header,$=B.a.Content,V=B.a.Footer,Z=function(e){var t,n=e.children,a=Object(l.g)().push;return"/"===Object(l.h)().pathname&&(t={position:"absolute"}),Object(C.jsxs)(B.a,{className:"layout",children:[Object(C.jsx)(U,{style:t,children:Object(C.jsx)(q,{push:a})}),Object(C.jsx)($,{children:Object(C.jsx)("div",{className:"site-layout-content",children:n})}),Object(C.jsxs)(V,{style:{textAlign:"center"},children:["RENTIT \xa92020 Created by ",Object(C.jsxs)("a",{href:"https://github.com/JuanBatkis",target:"_blank",children:["Juan Batkis ",Object(C.jsx)("span",{style:{fontSize:"1.2em"},children:"\ud83d\udc4b"})]})]})]})},Q=n(66),W=n(179),K=function(e){var t=e.component,n=Object(W.a)(e,["component"]),a=I().user;return Object(C.jsx)(l.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return a?Object(C.jsx)(t,Object(Q.a)({},e)):(k.a.error({message:"Something went wrong",description:"You must be logged in to access this section",duration:5,style:{borderRadius:"20px"}}),Object(C.jsx)(l.a,{to:"/login"}))}}))},X=function(e){var t=e.component,n=Object(W.a)(e,["component"]),a=I().user;return Object(C.jsx)(l.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return a?Object(C.jsx)(l.a,{to:"/profile"}):Object(C.jsx)(t,Object(Q.a)({},e))}}))},ee=x.a.create({baseURL:"/api/product",withCredentials:!0}),te=function(e){return ee.get("/all/".concat(e))},ne=function(e){return ee.post("/query",e)},ae=function(e){return ee.get("/".concat(e))},ce=function(e,t){return ee.get("/user/".concat(e,"/").concat(t))},re=function(e){return ee.delete("/".concat(e))},se=n(434),oe=n(425),ie=se.a.Meta,le=function(e){var t=e.product,n="".concat(t._id,"-").concat(t.name.replace(/\s+/g,"-").toLowerCase());return Object(C.jsx)(F.a,{span:6,children:Object(C.jsx)(i.b,{to:"/product/".concat(n),children:Object(C.jsx)(se.a,{hoverable:!0,cover:t.images[0]?Object(C.jsx)("img",{alt:"product image",src:t.images[0],style:{height:"320px",objectFit:"contain",padding:"1px"}}):Object(C.jsx)(oe.a.Image,{style:{height:"320px",width:"100%"}}),children:Object(C.jsx)(ie,{title:t.name,description:t.priceDay?"$".concat(t.priceHour,"/hr or $").concat(t.priceDay,"/day"):"$".concat(t.priceHour,"/hr")})})})})},je=n(423),de=je.a.Title,ue=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(),s=Object(a.useRef)();Object(a.useRef)();Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(4);case 2:t=e.sent,n=t.data,c(n.products);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("section",{id:"main-banner",children:Object(C.jsxs)(P.a,{className:"full-heigh",justify:"center",align:"middle",children:[Object(C.jsx)(F.a,{span:7,offset:2,children:Object(C.jsx)(de,{children:"A new way to get what you need"})}),Object(C.jsxs)(F.a,{span:15,className:"full-heigh iframe-container",children:[Object(C.jsx)("div",{id:"iframeCover",ref:s,style:{opacity:"1"}}),Object(C.jsx)("iframe",{src:"https://my.spline.design/floating-adbb8c927f6e8e69a180701a9fb2ad6c/",frameBorder:"0",width:"100%",height:"100%",onLoad:function(){r.current.style.opacity="1",s.current.style.opacity="0"},ref:r})]})]})}),Object(C.jsx)(P.a,{gutter:16,style:{padding:"20px"},id:"latest-prods",children:n?n.map((function(e){return Object(C.jsx)(le,{product:e})})):Object(C.jsx)(oe.a,{active:!0})})]})},be=n(421),pe=n(415),he=n(53),Oe=n(440),xe=n(441),ge=je.a.Text,me=function(){var e=be.a.useForm(),t=Object(d.a)(e,1)[0],n=I().login;return Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsxs)("div",{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Login"}),Object(C.jsxs)(be.a,{form:t,onFinish:function(e){n(e)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{name:"email",label:"Email:",children:Object(C.jsx)(T.a,{type:"email"})}),Object(C.jsx)(be.a.Item,{name:"password",label:"Password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Log me in!"})]}),Object(C.jsx)(pe.a,{id:"socialDivider",children:"Or connect with"}),Object(C.jsxs)(P.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/google",children:Object(C.jsx)(Oe.a,{})})}),Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/facebook",children:Object(C.jsx)(xe.a,{})})}),Object(C.jsx)(F.a,{span:24,align:"middle",className:"changeAuth",children:Object(C.jsxs)(ge,{children:["Don't have an account? ",Object(C.jsx)(i.b,{to:"/signup",children:"Sign up here!"})]})})]})]})})})},fe=je.a.Text,ye=function(){var e=be.a.useForm(),t=Object(d.a)(e,1)[0],n=Object(l.g)().push;function a(){return(a=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(t);case 3:k.a.success({message:"Account created!",description:"Hello ".concat(t.firstName," \ud83d\udc4b. Please check your email to verify your account"),duration:5,style:{borderRadius:"20px"}}),n("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsxs)("div",{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Sign up"}),Object(C.jsxs)(be.a,{form:t,onFinish:function(e){return a.apply(this,arguments)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{name:"email",label:"Email:",children:Object(C.jsx)(T.a,{type:"email"})}),Object(C.jsxs)(P.a,{gutter:6,children:[Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{name:"firstName",label:"First name:",children:Object(C.jsx)(T.a,{})})}),Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{name:"lastName",label:"Last name:",children:Object(C.jsx)(T.a,{})})})]}),Object(C.jsx)(be.a.Item,{name:"storeName",label:"Store name:",children:Object(C.jsx)(T.a,{})}),Object(C.jsx)(be.a.Item,{name:"phone",label:"Phone:",children:Object(C.jsx)(T.a,{})}),Object(C.jsx)(be.a.Item,{name:"password",label:"Password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(be.a.Item,{name:"confirmPassword",label:"Confirm password:",children:Object(C.jsx)(T.a.Password,{})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",block:!0,size:"large",shape:"round",children:"Sign me up!"})]}),Object(C.jsx)(pe.a,{id:"socialDivider",children:"Or connect with"}),Object(C.jsxs)(P.a,{justify:"center",align:"middle",className:"socialLogin",children:[Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/google",children:Object(C.jsx)(Oe.a,{})})}),Object(C.jsx)(F.a,{span:6,align:"middle",children:Object(C.jsx)("a",{href:"/api/auth/facebook",children:Object(C.jsx)(xe.a,{})})}),Object(C.jsx)(F.a,{span:24,align:"middle",className:"changeAuth",children:Object(C.jsxs)(fe,{children:["Already have an account? ",Object(C.jsx)(i.b,{to:"/login",children:"Log in here!"})]})})]})]})})})},ve=n(173),we=n(69),ke=je.a.Paragraph,Ce=Object(C.jsx)(we.a,{style:{fontSize:40,color:"#5dbe8c"},spin:!0}),Se=function(){var e=Object(l.i)().id,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),o=Object(d.a)(s,2),j=o[0],u=o[1],h=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({id:t});case 3:n=e.sent,a=n.data,u(a.firstName),r(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(e)}),[]),Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsx)("div",{children:c?Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(ve.a,{indicator:Ce})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:["Hello ",j,"!"]}),Object(C.jsx)(ke,{children:"Your account has been successfully activated!"}),Object(C.jsx)(ke,{children:"You can now proceed to login and start taking advantage of every feature of our platform!"}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(R.a,{type:"primary",size:"large",shape:"round",style:{height:"auto",padding:"6px 30px"},children:Object(C.jsx)(i.b,{to:"/login",style:{color:"#fff",fontSize:"1.5em"},children:"Log in!"})})})]})})})})},Ne=n(44),Ie=n.n(Ne),Te=(n(194),n(174)),Le=n.n(Te),Pe=(n(234),n(435)),Fe=n(436),Re=n(122),ze=n(427),De=je.a.Text,Ae=function(e){var t=e.rating,n=t.one+t.two+t.three+t.four+t.five;return Object(C.jsxs)("div",{children:[Object(C.jsx)(ze.a,{allowHalf:!0,disabled:!0,defaultValue:t.total}),Object(C.jsx)(De,{children:" (".concat(n,1===n?" rating)":" ratings)")})]})};Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var Me=je.a.Title,Ee=je.a.Text,Je=function(){var e=I().user,t=I().setUser,n=Object(a.useState)(e.firstName),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(e.lastName),i=Object(d.a)(o,2),l=i[0],j=i[1],u=Object(a.useState)(e.storeName),h=Object(d.a)(u,2),O=h[0],x=h[1],m=Object(a.useState)(e.phone),f=Object(d.a)(m,2),y=f[0],w=f[1],k=Object(a.useRef)(),S=Object(a.useState)(!1),N=Object(d.a)(S,2),T=N[0],L=N[1],z=Object(a.useState)(!1),D=Object(d.a)(z,2),A=D[0],M=D[1],E=Object(a.useState)("Save location"),J=Object(d.a)(E,2),G=J[0],_=J[1],H=Object(a.useState)(null),Y=Object(d.a)(H,2),q=Y[0],B=Y[1],U=Object(a.useState)(e.location.coordinates?e.location.coordinates[0]:-73.51822),$=Object(d.a)(U,2),V=$[0],Z=$[1],Q=Object(a.useState)(e.location.coordinates?e.location.coordinates[1]:40.76127),W=Object(d.a)(Q,2),K=W[0],X=W[1],ee=Object(a.useState)(!1),te=Object(d.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){var t=new Ie.a.Map({container:k.current,style:"mapbox://styles/mapbox/streets-v11",center:[V,K],zoom:e.location.coordinates?12:4}),n=new Le.a({accessToken:Ie.a.accessToken,mapboxgl:Ie.a,marker:!1,flyTo:{speed:2}});t.addControl(n),t.addControl(new Ie.a.NavigationControl),t.addControl(new Ie.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,showUserLocation:!1}));var a=new Ie.a.Marker({draggable:!1}).setLngLat([V,K]).addTo(t);return t.on("movestart",(function(e){a.setLngLat(t.getCenter())})),t.on("move",(function(e){a.setLngLat(t.getCenter())})),t.on("moveend",(function(e){t.getCenter().lng.toFixed(4)===V.toFixed(4)&&t.getCenter().lat.toFixed(4)===K.toFixed(4)||ae(!0),M(!1),_("Save location"),a.setLngLat(t.getCenter())})),t.on("load",(function(){B(t)})),function(){return t.remove()}}),[V,K]);var ce=function(){var e=Object(p.a)(b.a.mark((function e(){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,(a=n.data)&&t(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.current.style.pointerEvents="none",k.current.style.opacity=.5,L(!0),_("Saving location"),e.next=6,t={lng:q.getCenter().lng,lat:q.getCenter().lat},g.patch("/location/change",t);case 6:ce(),k.current.style.pointerEvents="all",k.current.style.opacity=1,Z(q.getCenter().lng),X(q.getCenter().lat),L(!1),M(Object(C.jsx)(Re.a,{})),_("Saved location");case 14:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"user-info-header",children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"".concat(r," ").concat(l)}),Object(C.jsxs)("div",{className:"user-score",children:[Object(C.jsx)(Me,{level:5,children:"User score:"}),Object(C.jsx)(Ae,{rating:e.rating})]})]}),Object(C.jsx)(pe.a,{}),Object(C.jsxs)(P.a,{gutter:16,children:[Object(C.jsxs)(F.a,{span:12,children:[Object(C.jsx)(Me,{level:2,children:"User info:"}),Object(C.jsx)(Me,{level:4,children:"First name:"}),Object(C.jsx)(Ee,{editable:{onChange:s},children:r}),Object(C.jsx)(Me,{level:4,children:"Last name:"}),Object(C.jsx)(Ee,{editable:{onChange:j},children:l}),Object(C.jsx)(Me,{level:4,children:"Store name:"}),Object(C.jsx)(Ee,{editable:{onChange:x},children:O}),Object(C.jsx)(Me,{level:4,children:"Phone number:"}),Object(C.jsx)(Ee,{editable:{onChange:w},children:y})]}),Object(C.jsxs)(F.a,{span:12,className:"location-container",children:[!e.location.coordinates&&Object(C.jsx)(Pe.a,{message:"You won't me able to create products without saving a location",type:"warning",showIcon:!0}),Object(C.jsx)("div",{className:"map-container",ref:k,style:{height:"500px"}}),Object(C.jsxs)(Fe.b,{className:"location-buttons",style:ne?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"},children:[Object(C.jsx)(R.a,{type:"primary",shape:"round",size:"large",loading:T,icon:A,onClick:re,children:G}),Object(C.jsx)(R.a,{danger:!0,shape:"round",size:"large",onClick:function(){q.flyTo({center:[V,K],speed:2,essential:!0}),ae(!1)},children:"Restore location"})]})]})]})]})},Ge=n(202),_e=n(418),He=Ge.a.TabPane,Ye=function(){return Object(C.jsxs)(Ge.a,{onChange:function(e){console.log(e)},type:"card",children:[Object(C.jsx)(He,{tab:"Asked by me",children:Object(C.jsx)(_e.a,{columns:[{title:"Name",dataIndex:"name",filters:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim"},{text:"Submenu",value:"Submenu",children:[{text:"Green",value:"Green"},{text:"Black",value:"Black"}]}],onFilter:function(e,t){return 0===t.name.indexOf(e)},sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend"]},{title:"Age",dataIndex:"age",defaultSortOrder:"descend",sorter:function(e,t){return e.age-t.age}},{title:"Address",dataIndex:"address",filters:[{text:"London",value:"London"},{text:"New York",value:"New York"}],filterMultiple:!1,onFilter:function(e,t){return 0===t.address.indexOf(e)},sorter:function(e,t){return e.address.length-t.address.length},sortDirections:["descend","ascend"]}],dataSource:[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park"},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park"},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park"},{key:"4",name:"Jim Red",age:32,address:"London No. 2 Lake Park"}],onChange:function(e,t,n,a){console.log("params",e,t,n,a)}})},"1"),Object(C.jsx)(He,{tab:"Asked to me",children:"Content of Tab Pane 2"},"2")]})},qe=n(255),Be=n(416),Ue=n(257),$e=n(258),Ve=(je.a.Title,je.a.Text,function(){var e=I().user,t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(p.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(e._id,20);case 2:n=t.sent,a=n.data,r(a.products);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(n);case 2:return t.next=4,ce(e._id,20);case 4:a=t.sent,c=a.data,r(c.products);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]);var l=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(C.jsx)("a",{children:e})}},{title:"Price hour",dataIndex:"priceHour",key:"priceHour",render:function(e){return"$".concat(e)}},{title:"Price day",dataIndex:"priceDay",key:"priceDay",render:function(e){return e?"$".concat(e):"-"}},{title:"Category",dataIndex:"category",key:"category",render:function(e){return Object(C.jsx)(qe.a,{color:"green",children:e})}},{title:"Description",dataIndex:"description",key:"description"},{title:"Rating",dataIndex:"rating",key:"rating",render:function(e){return 0===e.total?"-":e.total}},{title:"Action",key:"_id",align:"center",render:function(e){return Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(R.a,{type:"link",size:"large",children:Object(C.jsx)(Ue.a,{})}),Object(C.jsx)(Be.a,{title:"Are you sure to delete this product?",placement:"topRight",onConfirm:function(){return function(e){return o.apply(this,arguments)}(e._id)},okText:"Delete",cancelText:"Cancel",children:Object(C.jsx)(R.a,{type:"link",danger:!0,size:"large",children:Object(C.jsx)($e.a,{})})})]})}}];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"user-info-header",children:Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:"Products"}),e.location.coordinates?Object(C.jsx)(R.a,{type:"primary",icon:Object(C.jsx)(_.a,{}),size:"large",shape:"round",children:Object(C.jsx)(i.b,{to:"/profile/products/add",style:{color:"#fff"},children:"Add new"})}):Object(C.jsx)(R.a,{type:"primary",disabled:!0,size:"large",shape:"round",children:"Save your location to add products"})]})}),Object(C.jsx)(pe.a,{}),c?Object(C.jsx)(_e.a,{dataSource:c,columns:l}):Object(C.jsx)(oe.a,{active:!0})]})}),Ze=n(137),Qe=n(431),We=n(420),Ke=Ze.a.Option,Xe={labelCol:{span:8},wrapperCol:{span:24}},et={wrapperCol:{offset:0,span:16}};function tt(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var nt=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),o=s[0],j=s[1],u=Object(a.useState)(""),h=Object(d.a)(u,2),O=h[0],g=h[1],m=Object(a.useState)([]),f=Object(d.a)(m,2),y=f[0],v=f[1],w=Object(a.useState)(!1),S=Object(d.a)(w,2),N=S[0],I=S[1],z=Object(l.g)().push,D=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/jpeg"===t.type||"image/png"===t.type||"image/webp"===t.type){e.next=3;break}return e.abrupt("return",k.a.error({message:"Something went wrong",description:"You can only upload a JPG/PNG/WEBP file!",duration:5,style:{borderRadius:"20px"}}));case 3:if(t.size/1024/1024<2){e.next=6;break}return e.abrupt("return",k.a.error({message:"Something went wrong",description:"Image must smaller than 2MB!",duration:5,style:{borderRadius:"20px"}}));case 6:return(n=new FormData).append("file",t),"https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n.append("upload_preset","rentit_product"),I(!0),e.next=13,x.a.post("https://api.cloudinary.com/v1_1/djv6xyyqp/image/upload",n);case 13:a=e.sent,c=a.data,(r=y).push({uid:c.asset_id,name:c.original_filename,status:"done",url:c.secure_url}),v(r),I(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,tt(t.originFileObj);case 3:t.preview=e.sent;case 4:j(t.url||t.preview),c(!0),g(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=Object(C.jsxs)("div",{children:[N?Object(C.jsx)(we.a,{}):Object(C.jsx)(_.a,{}),Object(C.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),E=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.images=y.map((function(e){return e.url})),e.prev=1,e.next=4,n=t,ee.post("/",n);case 4:k.a.success({message:"Product created!",description:"".concat(t.name," has been added successfully to your available rentals \ud83c\udf89"),duration:5,style:{borderRadius:"20px"}}),z("/profile/products"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}});case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(be.a,Object(Q.a)(Object(Q.a)({},Xe),{},{name:"basic",initialValues:{remember:!0},onFinish:E,onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",children:[Object(C.jsx)(be.a.Item,{label:"Product name:",name:"name",rules:[{required:!0,message:"Please input the product name!"}],children:Object(C.jsx)(T.a,{size:"large"})}),Object(C.jsxs)(P.a,{gutter:6,children:[Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{label:"Price per hour:",name:"priceHour",rules:[{required:!0,message:"Please input the price per hour!"}],children:Object(C.jsx)(Qe.a,{defaultValue:1,min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})}),Object(C.jsx)(F.a,{span:12,children:Object(C.jsx)(be.a.Item,{label:"Price per day:",name:"priceDay",children:Object(C.jsx)(Qe.a,{min:0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})})]}),Object(C.jsx)(be.a.Item,{label:"Category",name:"category",rules:[{required:!0,message:"Please select a category!"}],children:Object(C.jsxs)(Ze.a,{placeholder:"Please select a category",children:[Object(C.jsx)(Ke,{value:"tools",children:"Tools"}),Object(C.jsx)(Ke,{value:"technology",children:"Technology"}),Object(C.jsx)(Ke,{value:"vehicles",children:"Vehicles"}),Object(C.jsx)(Ke,{value:"sports",children:"Sports"}),Object(C.jsx)(Ke,{value:"other",children:"Other"})]})}),Object(C.jsx)(be.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input a description!"}],children:Object(C.jsx)(T.a.TextArea,{maxLength:2e3,showCount:!0,autoSize:{minRows:3,maxRows:8}})}),Object(C.jsx)(We.a,{listType:"picture-card",fileList:y,beforeUpload:D,onPreview:A,method:"get",onRemove:function(e){var t=y.filter((function(t){return t.uid!==e.uid}));v(t)},children:y.length>=8?null:M}),Object(C.jsx)(L.a,{visible:n,title:O,footer:null,onCancel:function(){return c(!1)},children:Object(C.jsx)("img",{alt:"example",style:{width:"100%"},src:o})}),Object(C.jsx)(be.a.Item,Object(Q.a)(Object(Q.a)({},et),{},{children:Object(C.jsxs)(Fe.b,{size:"middle",children:[Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",children:"Create"}),Object(C.jsx)(R.a,{danger:!0,size:"large",shape:"round",children:Object(C.jsx)(i.b,{to:"/profile/products/",children:"Cancel"})})]})}))]}))},at=n(437),ct=function(){var e,t=Object(l.j)().path,n=I().user,a=[{title:"User info",link:t},{title:"My rents",link:"".concat(t,"/rents")},{title:"My questions",link:"".concat(t,"/questions")},{title:"My products",link:"".concat(t,"/products")}];return Object(C.jsxs)(P.a,{gutter:16,justify:"center",className:"main-row profile-row",children:[Object(C.jsx)(F.a,{xs:8,xl:6,children:Object(C.jsxs)("div",{className:"profile-cont side-menu-cont",children:[n.avatar?Object(C.jsx)(M.a,{size:150,src:n.avatar,style:{cursor:"pointer"}}):Object(C.jsx)(M.a,{size:150,style:(e={background:"rgb(0,161,186)"},Object(j.a)(e,"background","linear-gradient(45deg, rgba(0,161,186,1) 0%, rgba(156,216,115,1) 100%)"),Object(j.a)(e,"cursor","pointer"),e),children:"".concat(n.firstName[0]).concat(n.lastName[0])}),Object(C.jsx)(at.b,{size:"small",dataSource:a,renderItem:function(e){return Object(C.jsx)(at.b.Item,{children:Object(C.jsx)(R.a,{type:"text",size:"large",children:Object(C.jsx)(i.b,{to:e.link,children:e.title})})})}})]})}),Object(C.jsx)(F.a,{xs:16,xl:14,children:Object(C.jsx)("div",{className:"profile-cont info-cont",children:Object(C.jsxs)(l.d,{children:[Object(C.jsx)(l.b,{component:Je,path:t,exact:!0}),Object(C.jsx)(l.b,{component:function(){return"Rents"},path:"".concat(t,"/rents")}),Object(C.jsx)(l.b,{component:Ye,path:"".concat(t,"/questions")}),Object(C.jsx)(l.b,{component:Ve,path:"".concat(t,"/products"),exact:!0}),Object(C.jsx)(l.b,{component:nt,path:"".concat(t,"/products/add")})]})})})]})},rt=n(428),st=n(422),ot=n(84),it=rt.a.Panel;Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var lt=function(){var e=I().user,t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useRef)(),o=Object(a.useState)(null),i=Object(d.a)(o,2),l=i[0],j=i[1],u=Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[0]:-58.401947),h=Object(d.a)(u,2),O=h[0],x=h[1],g=Object(a.useState)(e&&e.location.coordinates?e.location.coordinates[1]:-34.595134),m=Object(d.a)(g,2),f=m[0],y=m[1],v=Object(a.useState)(1),w=Object(d.a)(v,2),k=w[0],S=w[1],N=Object(a.useState)(!0),T=Object(d.a)(N,2),L=T[0],R=T[1],z=Object(a.useState)(Object(C.jsx)("h3",{children:"Colse map"})),D=Object(d.a)(z,2),A=D[0],M=D[1],E=Object(a.useState)(!1),J=Object(d.a)(E,2),G=J[0],_=J[1];function H(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(p.a)(b.a.mark((function e(t,n,a){var c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),c={limit:30,category:null,center:[t,n],radius:a},e.next=4,ne(c);case 4:s=e.sent,o=s.data,r(o.products),_(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){H(O,f,k)}),[]),Object(a.useEffect)((function(){var e=new Ie.a.Map({container:s.current,style:"mapbox://styles/mapbox/streets-v11",center:[O,f],zoom:12}),t=new Le.a({accessToken:Ie.a.accessToken,mapboxgl:Ie.a,marker:!1,flyTo:{speed:2}});e.addControl(t),e.addControl(new Ie.a.NavigationControl),e.addControl(new Ie.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,showUserLocation:!1}));var n=new Ie.a.Marker({draggable:!1}).setLngLat([O,f]).addTo(e);return e.on("movestart",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1))})),e.on("move",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1))})),e.on("moveend",(function(t){n.setLngLat(e.getCenter()),e.getSource("polygon").setData(q([e.getCenter().lng,e.getCenter().lat],k,!1)),H(e.getCenter().lng,e.getCenter().lat,k),B(e.getCenter().lng,e.getCenter().lat),j(e)})),e.on("load",(function(){j(e)})),e.on("load",(function(){e.addSource("polygon",q([e.getCenter().lng,e.getCenter().lat],k,!0)),e.addLayer({id:"polygon",type:"fill",source:"polygon",layout:{},paint:{"fill-color":"#5dbe8c","fill-opacity":.5}})})),function(){return e.remove()}}),[]);var q=function(e,t,n,a){a||(a=64);for(var c,r,s,o=e[1],i=e[0],l=t,j=[],d=l/(111.32*Math.cos(o*Math.PI/180)),u=l/110.574,b=0;b<a;b++)c=b/a*(2*Math.PI),r=d*Math.cos(c),s=u*Math.sin(c),j.push([i+r,o+s]);return j.push(j[0]),n?{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[j]}}]}}:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[j]}}]}},B=function(e,t){x(e),y(t)};return Object(C.jsxs)(P.a,{children:[Object(C.jsx)(F.a,{span:24,children:Object(C.jsx)(rt.a,{defaultActiveKey:["1"],bordered:!1,ghost:!0,onChange:function(){L?(M(Object(C.jsx)("h3",{children:"Open map"})),R(!1)):(M(Object(C.jsx)("h3",{children:"Close map"})),R(!0))},children:Object(C.jsx)(it,{header:A,children:Object(C.jsx)("div",{className:"map-container",ref:s,style:{height:"400px"}})},"1")})}),Object(C.jsx)(F.a,{span:24,children:Object(C.jsxs)(P.a,{wrap:!1,children:[Object(C.jsx)(F.a,{flex:"220px",children:Object(C.jsx)(st.a,{min:.5,max:20,onChange:function(e){S(e),l.getSource("polygon").setData(q([l.getCenter().lng,l.getCenter().lat],e,!1))},onAfterChange:function(e){S(e),H(O,f,e)},value:k,step:.5})}),Object(C.jsx)(F.a,{flex:"auto",children:Object(C.jsx)(P.a,{gutter:[16,16],style:{padding:"20px"},id:"latest-prods",children:!c||G?Object(C.jsx)(oe.a,{active:!0}):0===c.length?Object(C.jsx)(ot.a,{description:Object(C.jsx)("p",{children:"Sorry, it seems like there are no products here"})}):c.map((function(e){return Object(C.jsx)(le,{product:e})}))})})]})})]})},jt=n(252),dt=x.a.create({baseURL:"/api/rent",withCredentials:!0}),ut=function(e){return dt.post("/preference",e)},bt=function(e){return dt.post("/",e)},pt=x.a.create({baseURL:"/api/question",withCredentials:!0}),ht=function(e){return pt.post("",e)},Ot=n(419),xt=n(424),gt=n(433),mt=n(417),ft=n(82),yt=n(79),vt=n.n(yt),wt=je.a.Title,kt=je.a.Text,Ct=je.a.Paragraph,St=Ot.a.RangePicker;Ie.a.accessToken="pk.eyJ1IjoianVhbmJhdGtpcyIsImEiOiJja2xlMDJ1Y240ZHR1Mnd1aTVqOGIxdWpyIn0.GQOtc1ghwfAhcaavE_Z3yA",Ie.a.workerClass=n(195).default;var Nt=function(){var e=Object(l.i)().id,t=Object(a.useRef)(),n=Object(a.useState)(null),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)([]),j=Object(d.a)(o,2),u=j[0],h=j[1],O=be.a.useForm(),x=Object(d.a)(O,1)[0],g=Object(a.useState)(!1),m=Object(d.a)(g,2),f=m[0],y=m[1],v=Object(a.useState)(!1),w=Object(d.a)(v,2),S=w[0],N=w[1],I=Object(a.useState)(!1),L=Object(d.a)(I,2),z=L[0],D=L[1],A=Object(a.useState)(null),M=Object(d.a)(A,2),J=M[0],G=M[1],_=Object(a.useState)(null),H=Object(d.a)(_,2),Y=H[0],q=H[1],B=Object(a.useState)(null),U=Object(d.a)(B,2),$=U[0],V=U[1],Z=Object(a.useState)(0),Q=Object(d.a)(Z,2),W=Q[0],K=Q[1],X=Object(a.useState)(!1),ee=Object(d.a)(X,2),te=ee[0],ne=ee[1],ce=Object(a.useState)(null),re=Object(d.a)(ce,2),se=re[0],ie=re[1],le=Object(a.useRef)(),je=Object(a.useState)(0),de=Object(d.a)(je,2),ue=de[0],Oe=de[1],xe=Object(a.useState)(0),ge=Object(d.a)(xe,2),me=ge[0],fe=ge[1];Object(a.useEffect)((function(){function t(){return(t=Object(p.a)(b.a.mark((function t(){var n,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.split("-")[0],t.next=3,ae(n);case 3:a=t.sent,c=a.data,console.log(c),s(c),h(c.questions.reverse()),Oe(c.owner.location.coordinates[0]),fe(c.owner.location.coordinates[1]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){if(ue&&me){var e=new Ie.a.Map({container:le.current,style:"mapbox://styles/mapbox/streets-v11",center:[ue,me],zoom:12});return e.addControl(new Ie.a.NavigationControl),e.on("load",(function(){e.addSource("polygon",ye([ue,me],.8)),e.addLayer({id:"polygon",type:"fill",source:"polygon",layout:{},paint:{"fill-color":"#5dbe8c","fill-opacity":.5}})})),function(){return e.remove()}}}),[ue,me]);var ye=function(e,t,n){n||(n=64);for(var a,c,r,s=e[1],o=e[0],i=t,l=[],j=i/(111.32*Math.cos(s*Math.PI/180)),d=i/110.574,u=0;u<n;u++)a=u/n*(2*Math.PI),c=j*Math.cos(a),r=d*Math.sin(a),l.push([o+c,s+r]);return l.push(l[0]),{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[l]}}]}}};function ve(e,t,n){if(console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",t),console.log(n),"hours"===n?(N(!1),D(!0)):(N(!0),D(!1)),!e)return N(!1),D(!1),G(null),void ne(!1);if("hours"===n){var a=e[1].diff(e[0],"hours")+1;G(a),q(e[0]),V(e[1]),ne(!0),K(a*r.priceHour),we(r._id,r.name,a*r.priceHour,"for ".concat(a,a>1?" hours":" hour")),console.log(a)}else{var c=e[1].diff(e[0],"days")+1;G(c),q(e[0]),V(e[1]),ne(!0),K(c*r.priceDay),we(r._id,r.name,c*r.priceDay,"for ".concat(c,c>1?" days":" day")),console.log(c)}}var we=function(){var e=Object(p.a)(b.a.mark((function e(n,a,c,r){var s,o,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={productId:n,productName:a,total:c,time:r},console.log(s),e.next=4,ut(s);case 4:o=e.sent,i=o.data,console.log(i),(l=document.createElement("script")).src="https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js",l.setAttribute("data-preference-id",i.preferenceId),l.setAttribute("data-button-label","Rent"),ie(i.preferenceId),t.current&&(t.current.innerHTML="",t.current.appendChild(l));case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),ke=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S?"day":"hour",n={product:r._id,owner:r.owner._id,total:W,rentedFrom:Y.toDate(),rentedTo:$.toDate(),type:t,preferenceId:se},console.log(n),e.next=5,bt(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ce(e){console.log("onOk: ",e)}function Se(e){return e<vt()().startOf("day")}var Ne=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),n={product:r._id,owner:r.owner,description:t.question},console.log(n),e.prev=3,e.next=6,ht(n);case 6:h([n].concat(Object(jt.a)(u))),console.log(u),y(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),k.a.error({message:"Something went wrong",description:e.t0.response.data.message,duration:5,style:{borderRadius:"20px"}}),y(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"product-cont",children:Object(C.jsxs)(P.a,{gutter:[18,18],justify:"center",className:"product-row",children:[Object(C.jsx)(F.a,{span:14,children:r?Object(C.jsx)(xt.a,{children:r.images.map((function(e){return Object(C.jsx)("img",{alt:"product image",src:e,className:"slider-image"})}))}):Object(C.jsx)(oe.a.Image,{className:"image-skeleton"})}),Object(C.jsx)(F.a,{span:10,children:r?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"product-breadcrumbs",children:[Object(C.jsx)(qe.a,{children:Object(C.jsx)(i.b,{to:"/products",children:"products"})}),Object(C.jsx)(ft.a,{}),Object(C.jsx)(qe.a,{children:r.category})]}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h1",angle:"45deg",className:"text ant-typography",children:r.name}),Object(C.jsx)(Ae,{rating:r.rating}),Object(C.jsx)(pe.a,{dashed:!0}),Object(C.jsxs)("section",{id:"price-cont",children:[Object(C.jsxs)(wt,{level:2,style:{display:"inline-block"},children:["$",r.priceHour]}),Object(C.jsx)(kt,{children:"/hr"}),Object(C.jsx)("br",{}),Object(C.jsx)(St,{showTime:{format:"HH"},format:"YYYY/MM/DD HH:00",onChange:function(e,t){return ve(e,t,"hours")},onOk:Ce,disabledDate:Se,disabled:S}),r.priceDay&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(wt,{level:4,style:{marginTop:0},children:"or"}),Object(C.jsxs)(wt,{level:2,style:{display:"inline-block",marginTop:0},children:["$",r.priceDay]}),Object(C.jsx)(kt,{children:"/day"}),Object(C.jsx)("br",{}),Object(C.jsx)(St,{format:"YYYY/MM/DD",onChange:function(e,t){return ve(e,t,"days")},onOk:Ce,disabledDate:Se,disabled:z})]}),te?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"total-container",children:[Object(C.jsxs)(wt,{level:2,children:["Total: $",W," "]}),S?Object(C.jsx)(kt,{children:"(".concat(J,J>1?" days)":" day)")}):Object(C.jsx)(kt,{children:"(".concat(J,J>1?" hours)":" hour)")})]}),Object(C.jsx)("div",{ref:t,className:"mp-bttn-container",onClick:ke})]}):Object(C.jsx)(E.a,{placement:"topLeft",title:Object(C.jsx)("span",{children:"Please select your time period for the rental"}),children:Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"background",element:"button",angle:"45deg",className:"add-rent add-rent-disabled ant-btn ant-btn-primary ant-btn-round ant-btn-lg",children:"Rent"})})]})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(oe.a.Button,{active:!0,size:"small",shape:"round"}),Object(C.jsx)(oe.a.Button,{active:!0,size:"small",shape:"round"}),Object(C.jsx)("br",{}),Object(C.jsx)(oe.a.Input,{style:{width:300,marginTop:"10px",marginBottom:"40px"},active:!0,size:"large"}),Object(C.jsx)(oe.a,{active:!0})]})}),r&&Object(C.jsxs)(F.a,{span:20,children:[Object(C.jsx)(pe.a,{}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h2",angle:"45deg",className:"ant-typography",children:"About"}),Object(C.jsx)(wt,{level:4,children:"Description"}),Object(C.jsx)(Ct,{children:r.description}),Object(C.jsx)(wt,{level:4,children:"Owner"}),Object(C.jsxs)(gt.b,{bordered:!0,children:[r.owner.storeName?Object(C.jsx)(gt.b.Item,{label:"Store name",span:3,children:r.owner.storeName}):Object(C.jsx)(gt.b.Item,{label:"Name",span:3,children:r.owner.firstName}),Object(C.jsx)(gt.b.Item,{label:"Owner rating",span:3,children:Object(C.jsx)(Ae,{rating:r.owner.rating})}),Object(C.jsx)(gt.b.Item,{label:"Location",span:3,children:Object(C.jsx)("div",{className:"map-container",ref:le,style:{height:"300px"}})})]}),Object(C.jsx)(pe.a,{}),Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"text",element:"h2",angle:"45deg",className:"ant-typography",children:"Questions"}),Object(C.jsxs)(be.a,{form:x,onFinish:Ne,layout:"vertical",className:"question-form",children:[Object(C.jsx)(wt,{level:4,children:"Ask something"}),Object(C.jsx)(be.a.Item,{name:"question",children:Object(C.jsx)(T.a.TextArea,{maxLength:1e3,showCount:!0,autoSize:{minRows:2,maxRows:4}})}),Object(C.jsx)(R.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",loading:f,children:"Ask"})]}),Object(C.jsx)(wt,{level:4,children:"Previously asked"}),u.length>0?u.map((function(e){return Object(C.jsx)(mt.a,{content:Object(C.jsx)("p",{style:{fontSize:"1.2em"},children:e.description}),children:e.answer&&Object(C.jsx)(mt.a,{content:Object(C.jsx)("p",{children:e.answer})})})})):Object(C.jsx)(Ct,{children:"No questions yet. Be the first one to ask!"})]})]})})},It=je.a.Paragraph,Tt=je.a.Title,Lt=Object(C.jsx)(we.a,{style:{fontSize:40,color:"#5dbe8c"},spin:!0}),Pt=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(d.a)(r,2),o=s[0],j=s[1],u=new URLSearchParams(Object(l.h)().search).get("preference_id");console.log(u);var h=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={preferenceId:t,status:"in-progress"},dt.patch("/update",r);case 3:n=e.sent,a=n.data,console.log(a),j(a),c(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var r}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(u)}),[]),Object(C.jsx)(P.a,{justify:"center",align:"middle",className:"main-row auth-cont success-page",children:Object(C.jsx)(F.a,{xs:22,sm:18,md:14,lg:10,xl:8,xxl:6,children:Object(C.jsx)("div",{children:n||!o?Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(ve.a,{indicator:Lt})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(he.Gradient,{gradients:[["#00a1ba","#9cd873"]],property:"background",element:"span",angle:"45deg",className:"text ant-typography check-cont",children:Object(C.jsx)(Re.a,{})}),Object(C.jsx)(Tt,{level:2,children:"Thank you for your rent!"}),Object(C.jsxs)(It,{children:["Your rent for ",o.product.name," has successfully started!"]}),Object(C.jsx)(It,{children:"You can view more info in your profile page"}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(C.jsx)(R.a,{type:"primary",size:"large",shape:"round",style:{height:"auto",padding:"6px 30px"},children:Object(C.jsx)(i.b,{to:"/profile/rents",style:{color:"#fff",fontSize:"1.5em"},children:"More info"})})})]})})})})};var Ft=function(){return Object(C.jsx)(i.a,{children:Object(C.jsx)(Z,{children:Object(C.jsxs)(l.d,{children:[Object(C.jsx)(l.b,{component:ue,path:"/",exact:!0}),Object(C.jsx)(X,{component:me,path:"/login"}),Object(C.jsx)(X,{component:ye,path:"/signup"}),Object(C.jsx)(X,{component:Se,path:"/activate/:id"}),Object(C.jsx)(K,{component:ct,path:"/profile"}),Object(C.jsx)(l.b,{component:lt,path:"/products"}),Object(C.jsx)(l.b,{component:Nt,path:"/product/:id"}),Object(C.jsx)(l.b,{component:Pt,path:"/success"})]})})})};n(405),n(406),n(407),n(408),n(409),n(410),n(411);s.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(N,{children:Object(C.jsx)(Ft,{})})}),document.getElementById("root")),o()}},[[412,1,2]]]);
//# sourceMappingURL=main.ed31fd02.chunk.js.map